{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Trigger from 'rc-trigger';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport classNames from 'classnames';\nimport { connect } from 'mini-store';\nimport SubPopupMenu from './SubPopupMenu';\nimport placements from './placements';\nimport Animate from 'rc-animate';\nimport { noop, loopMenuItemRecursively, getMenuIdFromSubMenuEventKey, menuAllProps } from './util';\nvar guid = 0;\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nvar updateDefaultActiveFirst = function updateDefaultActiveFirst(store, eventKey, defaultActiveFirst) {\n  var _extends2;\n\n  var menuId = getMenuIdFromSubMenuEventKey(eventKey);\n  var state = store.getState();\n  store.setState({\n    defaultActiveFirst: _extends({}, state.defaultActiveFirst, (_extends2 = {}, _extends2[menuId] = defaultActiveFirst, _extends2))\n  });\n};\n\nexport var SubMenu = function (_React$Component) {\n  _inherits(SubMenu, _React$Component);\n\n  function SubMenu(props) {\n    _classCallCheck(this, SubMenu);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var store = props.store;\n    var eventKey = props.eventKey;\n    var defaultActiveFirst = store.getState().defaultActiveFirst;\n    _this.isRootMenu = false;\n    var value = false;\n\n    if (defaultActiveFirst) {\n      value = defaultActiveFirst[eventKey];\n    }\n\n    updateDefaultActiveFirst(store, eventKey, value);\n    return _this;\n  }\n\n  SubMenu.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate();\n  };\n\n  SubMenu.prototype.componentDidUpdate = function componentDidUpdate() {\n    var _this2 = this;\n\n    var _props = this.props,\n        mode = _props.mode,\n        parentMenu = _props.parentMenu,\n        manualRef = _props.manualRef; // invoke customized ref to expose component to mixin\n\n    if (manualRef) {\n      manualRef(this);\n    }\n\n    if (mode !== 'horizontal' || !parentMenu.isRootMenu || !this.props.isOpen) {\n      return;\n    }\n\n    this.minWidthTimeout = setTimeout(function () {\n      return _this2.adjustWidth();\n    }, 0);\n  };\n\n  SubMenu.prototype.componentWillUnmount = function componentWillUnmount() {\n    var _props2 = this.props,\n        onDestroy = _props2.onDestroy,\n        eventKey = _props2.eventKey;\n\n    if (onDestroy) {\n      onDestroy(eventKey);\n    }\n    /* istanbul ignore if */\n\n\n    if (this.minWidthTimeout) {\n      clearTimeout(this.minWidthTimeout);\n    }\n    /* istanbul ignore if */\n\n\n    if (this.mouseenterTimeout) {\n      clearTimeout(this.mouseenterTimeout);\n    }\n  };\n\n  SubMenu.prototype.renderChildren = function renderChildren(children) {\n    var props = this.props;\n    var baseProps = {\n      mode: props.mode === 'horizontal' ? 'vertical' : props.mode,\n      visible: this.props.isOpen,\n      level: props.level + 1,\n      inlineIndent: props.inlineIndent,\n      focusable: false,\n      onClick: this.onSubMenuClick,\n      onSelect: this.onSelect,\n      onDeselect: this.onDeselect,\n      onDestroy: this.onDestroy,\n      selectedKeys: props.selectedKeys,\n      eventKey: props.eventKey + '-menu-',\n      openKeys: props.openKeys,\n      openTransitionName: props.openTransitionName,\n      openAnimation: props.openAnimation,\n      onOpenChange: this.onOpenChange,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      parentMenu: this,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      triggerSubMenuAction: props.triggerSubMenuAction,\n      builtinPlacements: props.builtinPlacements,\n      defaultActiveFirst: props.store.getState().defaultActiveFirst[getMenuIdFromSubMenuEventKey(props.eventKey)],\n      multiple: props.multiple,\n      prefixCls: props.rootPrefixCls,\n      id: this._menuId,\n      manualRef: this.saveMenuInstance,\n      itemIcon: props.itemIcon,\n      expandIcon: props.expandIcon\n    };\n    var haveRendered = this.haveRendered;\n    this.haveRendered = true;\n    this.haveOpened = this.haveOpened || baseProps.visible || baseProps.forceSubMenuRender; // never rendered not planning to, don't render\n\n    if (!this.haveOpened) {\n      return React.createElement('div', null);\n    } // don't show transition on first rendering (no animation for opened menu)\n    // show appear transition if it's not visible (not sure why)\n    // show appear transition if it's not inline mode\n\n\n    var transitionAppear = haveRendered || !baseProps.visible || baseProps.mode !== 'inline';\n    baseProps.className = ' ' + baseProps.prefixCls + '-sub';\n    var animProps = {};\n\n    if (baseProps.openTransitionName) {\n      animProps.transitionName = baseProps.openTransitionName;\n    } else if (typeof baseProps.openAnimation === 'object') {\n      animProps.animation = _extends({}, baseProps.openAnimation);\n\n      if (!transitionAppear) {\n        delete animProps.animation.appear;\n      }\n    }\n\n    return React.createElement(Animate, _extends({}, animProps, {\n      showProp: 'visible',\n      component: '',\n      transitionAppear: transitionAppear\n    }), React.createElement(SubPopupMenu, _extends({}, baseProps, {\n      id: this._menuId\n    }), children));\n  };\n\n  SubMenu.prototype.render = function render() {\n    var _classNames;\n\n    var props = _extends({}, this.props);\n\n    var isOpen = props.isOpen;\n    var prefixCls = this.getPrefixCls();\n    var isInlineMode = props.mode === 'inline';\n    var className = classNames(prefixCls, prefixCls + '-' + props.mode, (_classNames = {}, _classNames[props.className] = !!props.className, _classNames[this.getOpenClassName()] = isOpen, _classNames[this.getActiveClassName()] = props.active || isOpen && !isInlineMode, _classNames[this.getDisabledClassName()] = props.disabled, _classNames[this.getSelectedClassName()] = this.isChildrenSelected(), _classNames));\n\n    if (!this._menuId) {\n      if (props.eventKey) {\n        this._menuId = props.eventKey + '$Menu';\n      } else {\n        this._menuId = '$__$' + ++guid + '$Menu';\n      }\n    }\n\n    var mouseEvents = {};\n    var titleClickEvents = {};\n    var titleMouseEvents = {};\n\n    if (!props.disabled) {\n      mouseEvents = {\n        onMouseLeave: this.onMouseLeave,\n        onMouseEnter: this.onMouseEnter\n      }; // only works in title, not outer li\n\n      titleClickEvents = {\n        onClick: this.onTitleClick\n      };\n      titleMouseEvents = {\n        onMouseEnter: this.onTitleMouseEnter,\n        onMouseLeave: this.onTitleMouseLeave\n      };\n    }\n\n    var style = {};\n\n    if (isInlineMode) {\n      style.paddingLeft = props.inlineIndent * props.level;\n    }\n\n    var ariaOwns = {}; // only set aria-owns when menu is open\n    // otherwise it would be an invalid aria-owns value\n    // since corresponding node cannot be found\n\n    if (this.props.isOpen) {\n      ariaOwns = {\n        'aria-owns': this._menuId\n      };\n    } // expand custom icon should NOT be displayed in menu with horizontal mode.\n\n\n    var icon = null;\n\n    if (props.mode !== 'horizontal') {\n      icon = this.props.expandIcon; // ReactNode\n\n      if (typeof this.props.expandIcon === 'function') {\n        icon = React.createElement(this.props.expandIcon, _extends({}, this.props));\n      }\n    }\n\n    var title = React.createElement('div', _extends({\n      ref: this.saveSubMenuTitle,\n      style: style,\n      className: prefixCls + '-title'\n    }, titleMouseEvents, titleClickEvents, {\n      'aria-expanded': isOpen\n    }, ariaOwns, {\n      'aria-haspopup': 'true',\n      title: typeof props.title === 'string' ? props.title : undefined\n    }), props.title, icon || React.createElement('i', {\n      className: prefixCls + '-arrow'\n    }));\n    var children = this.renderChildren(props.children);\n    var getPopupContainer = props.parentMenu.isRootMenu ? props.parentMenu.props.getPopupContainer : function (triggerNode) {\n      return triggerNode.parentNode;\n    };\n    var popupPlacement = popupPlacementMap[props.mode];\n    var popupAlign = props.popupOffset ? {\n      offset: props.popupOffset\n    } : {};\n    var popupClassName = props.mode === 'inline' ? '' : props.popupClassName;\n    var disabled = props.disabled,\n        triggerSubMenuAction = props.triggerSubMenuAction,\n        subMenuOpenDelay = props.subMenuOpenDelay,\n        forceSubMenuRender = props.forceSubMenuRender,\n        subMenuCloseDelay = props.subMenuCloseDelay,\n        builtinPlacements = props.builtinPlacements;\n    menuAllProps.forEach(function (key) {\n      return delete props[key];\n    }); // Set onClick to null, to ignore propagated onClick event\n\n    delete props.onClick;\n    return React.createElement('li', _extends({}, props, mouseEvents, {\n      className: className,\n      role: 'menuitem'\n    }), isInlineMode && title, isInlineMode && children, !isInlineMode && React.createElement(Trigger, {\n      prefixCls: prefixCls,\n      popupClassName: prefixCls + '-popup ' + popupClassName,\n      getPopupContainer: getPopupContainer,\n      builtinPlacements: _extends({}, placements, builtinPlacements),\n      popupPlacement: popupPlacement,\n      popupVisible: isOpen,\n      popupAlign: popupAlign,\n      popup: children,\n      action: disabled ? [] : [triggerSubMenuAction],\n      mouseEnterDelay: subMenuOpenDelay,\n      mouseLeaveDelay: subMenuCloseDelay,\n      onPopupVisibleChange: this.onPopupVisibleChange,\n      forceRender: forceSubMenuRender\n    }, title));\n  };\n\n  return SubMenu;\n}(React.Component);\nSubMenu.propTypes = {\n  parentMenu: PropTypes.object,\n  title: PropTypes.node,\n  children: PropTypes.any,\n  selectedKeys: PropTypes.array,\n  openKeys: PropTypes.array,\n  onClick: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  rootPrefixCls: PropTypes.string,\n  eventKey: PropTypes.string,\n  multiple: PropTypes.bool,\n  active: PropTypes.bool,\n  // TODO: remove\n  onItemHover: PropTypes.func,\n  onSelect: PropTypes.func,\n  triggerSubMenuAction: PropTypes.string,\n  onDeselect: PropTypes.func,\n  onDestroy: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onTitleMouseEnter: PropTypes.func,\n  onTitleMouseLeave: PropTypes.func,\n  onTitleClick: PropTypes.func,\n  popupOffset: PropTypes.array,\n  isOpen: PropTypes.bool,\n  store: PropTypes.object,\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  manualRef: PropTypes.func,\n  itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\n};\nSubMenu.defaultProps = {\n  onMouseEnter: noop,\n  onMouseLeave: noop,\n  onTitleMouseEnter: noop,\n  onTitleMouseLeave: noop,\n  onTitleClick: noop,\n  manualRef: noop,\n  mode: 'vertical',\n  title: ''\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onDestroy = function (key) {\n    _this3.props.onDestroy(key);\n  };\n\n  this.onKeyDown = function (e) {\n    var keyCode = e.keyCode;\n    var menu = _this3.menuInstance;\n    var _props3 = _this3.props,\n        isOpen = _props3.isOpen,\n        store = _props3.store;\n\n    if (keyCode === KeyCode.ENTER) {\n      _this3.onTitleClick(e);\n\n      updateDefaultActiveFirst(store, _this3.props.eventKey, true);\n      return true;\n    }\n\n    if (keyCode === KeyCode.RIGHT) {\n      if (isOpen) {\n        menu.onKeyDown(e);\n      } else {\n        _this3.triggerOpenChange(true); // need to update current menu's defaultActiveFirst value\n\n\n        updateDefaultActiveFirst(store, _this3.props.eventKey, true);\n      }\n\n      return true;\n    }\n\n    if (keyCode === KeyCode.LEFT) {\n      var handled = void 0;\n\n      if (isOpen) {\n        handled = menu.onKeyDown(e);\n      } else {\n        return undefined;\n      }\n\n      if (!handled) {\n        _this3.triggerOpenChange(false);\n\n        handled = true;\n      }\n\n      return handled;\n    }\n\n    if (isOpen && (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN)) {\n      return menu.onKeyDown(e);\n    }\n  };\n\n  this.onOpenChange = function (e) {\n    _this3.props.onOpenChange(e);\n  };\n\n  this.onPopupVisibleChange = function (visible) {\n    _this3.triggerOpenChange(visible, visible ? 'mouseenter' : 'mouseleave');\n  };\n\n  this.onMouseEnter = function (e) {\n    var _props4 = _this3.props,\n        key = _props4.eventKey,\n        onMouseEnter = _props4.onMouseEnter,\n        store = _props4.store;\n    updateDefaultActiveFirst(store, _this3.props.eventKey, false);\n    onMouseEnter({\n      key: key,\n      domEvent: e\n    });\n  };\n\n  this.onMouseLeave = function (e) {\n    var _props5 = _this3.props,\n        parentMenu = _props5.parentMenu,\n        eventKey = _props5.eventKey,\n        onMouseLeave = _props5.onMouseLeave;\n    parentMenu.subMenuInstance = _this3;\n    onMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  };\n\n  this.onTitleMouseEnter = function (domEvent) {\n    var _props6 = _this3.props,\n        key = _props6.eventKey,\n        onItemHover = _props6.onItemHover,\n        onTitleMouseEnter = _props6.onTitleMouseEnter;\n    onItemHover({\n      key: key,\n      hover: true\n    });\n    onTitleMouseEnter({\n      key: key,\n      domEvent: domEvent\n    });\n  };\n\n  this.onTitleMouseLeave = function (e) {\n    var _props7 = _this3.props,\n        parentMenu = _props7.parentMenu,\n        eventKey = _props7.eventKey,\n        onItemHover = _props7.onItemHover,\n        onTitleMouseLeave = _props7.onTitleMouseLeave;\n    parentMenu.subMenuInstance = _this3;\n    onItemHover({\n      key: eventKey,\n      hover: false\n    });\n    onTitleMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  };\n\n  this.onTitleClick = function (e) {\n    var props = _this3.props;\n    props.onTitleClick({\n      key: props.eventKey,\n      domEvent: e\n    });\n\n    if (props.triggerSubMenuAction === 'hover') {\n      return;\n    }\n\n    _this3.triggerOpenChange(!props.isOpen, 'click');\n\n    updateDefaultActiveFirst(props.store, _this3.props.eventKey, false);\n  };\n\n  this.onSubMenuClick = function (info) {\n    // in the case of overflowed submenu\n    // onClick is not copied over\n    if (typeof _this3.props.onClick === 'function') {\n      _this3.props.onClick(_this3.addKeyPath(info));\n    }\n  };\n\n  this.onSelect = function (info) {\n    _this3.props.onSelect(info);\n  };\n\n  this.onDeselect = function (info) {\n    _this3.props.onDeselect(info);\n  };\n\n  this.getPrefixCls = function () {\n    return _this3.props.rootPrefixCls + '-submenu';\n  };\n\n  this.getActiveClassName = function () {\n    return _this3.getPrefixCls() + '-active';\n  };\n\n  this.getDisabledClassName = function () {\n    return _this3.getPrefixCls() + '-disabled';\n  };\n\n  this.getSelectedClassName = function () {\n    return _this3.getPrefixCls() + '-selected';\n  };\n\n  this.getOpenClassName = function () {\n    return _this3.props.rootPrefixCls + '-submenu-open';\n  };\n\n  this.saveMenuInstance = function (c) {\n    // children menu instance\n    _this3.menuInstance = c;\n  };\n\n  this.addKeyPath = function (info) {\n    return _extends({}, info, {\n      keyPath: (info.keyPath || []).concat(_this3.props.eventKey)\n    });\n  };\n\n  this.triggerOpenChange = function (open, type) {\n    var key = _this3.props.eventKey;\n\n    var openChange = function openChange() {\n      _this3.onOpenChange({\n        key: key,\n        item: _this3,\n        trigger: type,\n        open: open\n      });\n    };\n\n    if (type === 'mouseenter') {\n      // make sure mouseenter happen after other menu item's mouseleave\n      _this3.mouseenterTimeout = setTimeout(function () {\n        openChange();\n      }, 0);\n    } else {\n      openChange();\n    }\n  };\n\n  this.isChildrenSelected = function () {\n    var ret = {\n      find: false\n    };\n    loopMenuItemRecursively(_this3.props.children, _this3.props.selectedKeys, ret);\n    return ret.find;\n  };\n\n  this.isOpen = function () {\n    return _this3.props.openKeys.indexOf(_this3.props.eventKey) !== -1;\n  };\n\n  this.adjustWidth = function () {\n    /* istanbul ignore if */\n    if (!_this3.subMenuTitle || !_this3.menuInstance) {\n      return;\n    }\n\n    var popupMenu = ReactDOM.findDOMNode(_this3.menuInstance);\n\n    if (popupMenu.offsetWidth >= _this3.subMenuTitle.offsetWidth) {\n      return;\n    }\n    /* istanbul ignore next */\n\n\n    popupMenu.style.minWidth = _this3.subMenuTitle.offsetWidth + 'px';\n  };\n\n  this.saveSubMenuTitle = function (subMenuTitle) {\n    _this3.subMenuTitle = subMenuTitle;\n  };\n};\n\nvar connected = connect(function (_ref, _ref2) {\n  var openKeys = _ref.openKeys,\n      activeKey = _ref.activeKey,\n      selectedKeys = _ref.selectedKeys;\n  var eventKey = _ref2.eventKey,\n      subMenuKey = _ref2.subMenuKey;\n  return {\n    isOpen: openKeys.indexOf(eventKey) > -1,\n    active: activeKey[subMenuKey] === eventKey,\n    selectedKeys: selectedKeys\n  };\n})(SubMenu);\nconnected.isSubMenu = true;\nexport default connected;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/StudyMate2/node_modules/rc-menu/es/SubMenu.js"],"names":["_classCallCheck","_possibleConstructorReturn","_inherits","_extends","React","ReactDOM","PropTypes","Trigger","KeyCode","classNames","connect","SubPopupMenu","placements","Animate","noop","loopMenuItemRecursively","getMenuIdFromSubMenuEventKey","menuAllProps","guid","popupPlacementMap","horizontal","vertical","updateDefaultActiveFirst","store","eventKey","defaultActiveFirst","_extends2","menuId","state","getState","setState","SubMenu","_React$Component","props","_this","call","_initialiseProps","isRootMenu","value","prototype","componentDidMount","componentDidUpdate","_this2","_props","mode","parentMenu","manualRef","isOpen","minWidthTimeout","setTimeout","adjustWidth","componentWillUnmount","_props2","onDestroy","clearTimeout","mouseenterTimeout","renderChildren","children","baseProps","visible","level","inlineIndent","focusable","onClick","onSubMenuClick","onSelect","onDeselect","selectedKeys","openKeys","openTransitionName","openAnimation","onOpenChange","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","triggerSubMenuAction","builtinPlacements","multiple","prefixCls","rootPrefixCls","id","_menuId","saveMenuInstance","itemIcon","expandIcon","haveRendered","haveOpened","createElement","transitionAppear","className","animProps","transitionName","animation","appear","showProp","component","render","_classNames","getPrefixCls","isInlineMode","getOpenClassName","getActiveClassName","active","getDisabledClassName","disabled","getSelectedClassName","isChildrenSelected","mouseEvents","titleClickEvents","titleMouseEvents","onMouseLeave","onMouseEnter","onTitleClick","onTitleMouseEnter","onTitleMouseLeave","style","paddingLeft","ariaOwns","icon","title","ref","saveSubMenuTitle","undefined","getPopupContainer","triggerNode","parentNode","popupPlacement","popupAlign","popupOffset","offset","popupClassName","forEach","key","role","popupVisible","popup","action","mouseEnterDelay","mouseLeaveDelay","onPopupVisibleChange","forceRender","Component","propTypes","object","node","any","array","func","string","bool","onItemHover","oneOf","oneOfType","defaultProps","_this3","onKeyDown","e","keyCode","menu","menuInstance","_props3","ENTER","RIGHT","triggerOpenChange","LEFT","handled","UP","DOWN","_props4","domEvent","_props5","subMenuInstance","_props6","hover","_props7","info","addKeyPath","c","keyPath","concat","open","type","openChange","item","trigger","ret","find","indexOf","subMenuTitle","popupMenu","findDOMNode","offsetWidth","minWidth","connected","_ref","_ref2","activeKey","subMenuKey","isSubMenu"],"mappings":"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","sourcesContent":["import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Trigger from 'rc-trigger';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport classNames from 'classnames';\nimport { connect } from 'mini-store';\nimport SubPopupMenu from './SubPopupMenu';\nimport placements from './placements';\nimport Animate from 'rc-animate';\nimport { noop, loopMenuItemRecursively, getMenuIdFromSubMenuEventKey, menuAllProps } from './util';\n\nvar guid = 0;\n\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\n\nvar updateDefaultActiveFirst = function updateDefaultActiveFirst(store, eventKey, defaultActiveFirst) {\n  var _extends2;\n\n  var menuId = getMenuIdFromSubMenuEventKey(eventKey);\n  var state = store.getState();\n  store.setState({\n    defaultActiveFirst: _extends({}, state.defaultActiveFirst, (_extends2 = {}, _extends2[menuId] = defaultActiveFirst, _extends2))\n  });\n};\n\nexport var SubMenu = function (_React$Component) {\n  _inherits(SubMenu, _React$Component);\n\n  function SubMenu(props) {\n    _classCallCheck(this, SubMenu);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var store = props.store;\n    var eventKey = props.eventKey;\n    var defaultActiveFirst = store.getState().defaultActiveFirst;\n\n    _this.isRootMenu = false;\n\n    var value = false;\n\n    if (defaultActiveFirst) {\n      value = defaultActiveFirst[eventKey];\n    }\n\n    updateDefaultActiveFirst(store, eventKey, value);\n    return _this;\n  }\n\n  SubMenu.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate();\n  };\n\n  SubMenu.prototype.componentDidUpdate = function componentDidUpdate() {\n    var _this2 = this;\n\n    var _props = this.props,\n        mode = _props.mode,\n        parentMenu = _props.parentMenu,\n        manualRef = _props.manualRef;\n\n    // invoke customized ref to expose component to mixin\n\n    if (manualRef) {\n      manualRef(this);\n    }\n\n    if (mode !== 'horizontal' || !parentMenu.isRootMenu || !this.props.isOpen) {\n      return;\n    }\n\n    this.minWidthTimeout = setTimeout(function () {\n      return _this2.adjustWidth();\n    }, 0);\n  };\n\n  SubMenu.prototype.componentWillUnmount = function componentWillUnmount() {\n    var _props2 = this.props,\n        onDestroy = _props2.onDestroy,\n        eventKey = _props2.eventKey;\n\n    if (onDestroy) {\n      onDestroy(eventKey);\n    }\n\n    /* istanbul ignore if */\n    if (this.minWidthTimeout) {\n      clearTimeout(this.minWidthTimeout);\n    }\n\n    /* istanbul ignore if */\n    if (this.mouseenterTimeout) {\n      clearTimeout(this.mouseenterTimeout);\n    }\n  };\n\n  SubMenu.prototype.renderChildren = function renderChildren(children) {\n    var props = this.props;\n    var baseProps = {\n      mode: props.mode === 'horizontal' ? 'vertical' : props.mode,\n      visible: this.props.isOpen,\n      level: props.level + 1,\n      inlineIndent: props.inlineIndent,\n      focusable: false,\n      onClick: this.onSubMenuClick,\n      onSelect: this.onSelect,\n      onDeselect: this.onDeselect,\n      onDestroy: this.onDestroy,\n      selectedKeys: props.selectedKeys,\n      eventKey: props.eventKey + '-menu-',\n      openKeys: props.openKeys,\n      openTransitionName: props.openTransitionName,\n      openAnimation: props.openAnimation,\n      onOpenChange: this.onOpenChange,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      parentMenu: this,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      triggerSubMenuAction: props.triggerSubMenuAction,\n      builtinPlacements: props.builtinPlacements,\n      defaultActiveFirst: props.store.getState().defaultActiveFirst[getMenuIdFromSubMenuEventKey(props.eventKey)],\n      multiple: props.multiple,\n      prefixCls: props.rootPrefixCls,\n      id: this._menuId,\n      manualRef: this.saveMenuInstance,\n      itemIcon: props.itemIcon,\n      expandIcon: props.expandIcon\n    };\n\n    var haveRendered = this.haveRendered;\n    this.haveRendered = true;\n\n    this.haveOpened = this.haveOpened || baseProps.visible || baseProps.forceSubMenuRender;\n    // never rendered not planning to, don't render\n    if (!this.haveOpened) {\n      return React.createElement('div', null);\n    }\n\n    // don't show transition on first rendering (no animation for opened menu)\n    // show appear transition if it's not visible (not sure why)\n    // show appear transition if it's not inline mode\n    var transitionAppear = haveRendered || !baseProps.visible || baseProps.mode !== 'inline';\n\n    baseProps.className = ' ' + baseProps.prefixCls + '-sub';\n    var animProps = {};\n\n    if (baseProps.openTransitionName) {\n      animProps.transitionName = baseProps.openTransitionName;\n    } else if (typeof baseProps.openAnimation === 'object') {\n      animProps.animation = _extends({}, baseProps.openAnimation);\n      if (!transitionAppear) {\n        delete animProps.animation.appear;\n      }\n    }\n\n    return React.createElement(\n      Animate,\n      _extends({}, animProps, {\n        showProp: 'visible',\n        component: '',\n        transitionAppear: transitionAppear\n      }),\n      React.createElement(\n        SubPopupMenu,\n        _extends({}, baseProps, { id: this._menuId }),\n        children\n      )\n    );\n  };\n\n  SubMenu.prototype.render = function render() {\n    var _classNames;\n\n    var props = _extends({}, this.props);\n    var isOpen = props.isOpen;\n    var prefixCls = this.getPrefixCls();\n    var isInlineMode = props.mode === 'inline';\n    var className = classNames(prefixCls, prefixCls + '-' + props.mode, (_classNames = {}, _classNames[props.className] = !!props.className, _classNames[this.getOpenClassName()] = isOpen, _classNames[this.getActiveClassName()] = props.active || isOpen && !isInlineMode, _classNames[this.getDisabledClassName()] = props.disabled, _classNames[this.getSelectedClassName()] = this.isChildrenSelected(), _classNames));\n\n    if (!this._menuId) {\n      if (props.eventKey) {\n        this._menuId = props.eventKey + '$Menu';\n      } else {\n        this._menuId = '$__$' + ++guid + '$Menu';\n      }\n    }\n\n    var mouseEvents = {};\n    var titleClickEvents = {};\n    var titleMouseEvents = {};\n    if (!props.disabled) {\n      mouseEvents = {\n        onMouseLeave: this.onMouseLeave,\n        onMouseEnter: this.onMouseEnter\n      };\n\n      // only works in title, not outer li\n      titleClickEvents = {\n        onClick: this.onTitleClick\n      };\n      titleMouseEvents = {\n        onMouseEnter: this.onTitleMouseEnter,\n        onMouseLeave: this.onTitleMouseLeave\n      };\n    }\n\n    var style = {};\n    if (isInlineMode) {\n      style.paddingLeft = props.inlineIndent * props.level;\n    }\n\n    var ariaOwns = {};\n    // only set aria-owns when menu is open\n    // otherwise it would be an invalid aria-owns value\n    // since corresponding node cannot be found\n    if (this.props.isOpen) {\n      ariaOwns = {\n        'aria-owns': this._menuId\n      };\n    }\n\n    // expand custom icon should NOT be displayed in menu with horizontal mode.\n    var icon = null;\n    if (props.mode !== 'horizontal') {\n      icon = this.props.expandIcon; // ReactNode\n      if (typeof this.props.expandIcon === 'function') {\n        icon = React.createElement(this.props.expandIcon, _extends({}, this.props));\n      }\n    }\n\n    var title = React.createElement(\n      'div',\n      _extends({\n        ref: this.saveSubMenuTitle,\n        style: style,\n        className: prefixCls + '-title'\n      }, titleMouseEvents, titleClickEvents, {\n        'aria-expanded': isOpen\n      }, ariaOwns, {\n        'aria-haspopup': 'true',\n        title: typeof props.title === 'string' ? props.title : undefined\n      }),\n      props.title,\n      icon || React.createElement('i', { className: prefixCls + '-arrow' })\n    );\n    var children = this.renderChildren(props.children);\n\n    var getPopupContainer = props.parentMenu.isRootMenu ? props.parentMenu.props.getPopupContainer : function (triggerNode) {\n      return triggerNode.parentNode;\n    };\n    var popupPlacement = popupPlacementMap[props.mode];\n    var popupAlign = props.popupOffset ? { offset: props.popupOffset } : {};\n    var popupClassName = props.mode === 'inline' ? '' : props.popupClassName;\n    var disabled = props.disabled,\n        triggerSubMenuAction = props.triggerSubMenuAction,\n        subMenuOpenDelay = props.subMenuOpenDelay,\n        forceSubMenuRender = props.forceSubMenuRender,\n        subMenuCloseDelay = props.subMenuCloseDelay,\n        builtinPlacements = props.builtinPlacements;\n\n    menuAllProps.forEach(function (key) {\n      return delete props[key];\n    });\n    // Set onClick to null, to ignore propagated onClick event\n    delete props.onClick;\n\n    return React.createElement(\n      'li',\n      _extends({}, props, mouseEvents, {\n        className: className,\n        role: 'menuitem'\n      }),\n      isInlineMode && title,\n      isInlineMode && children,\n      !isInlineMode && React.createElement(\n        Trigger,\n        {\n          prefixCls: prefixCls,\n          popupClassName: prefixCls + '-popup ' + popupClassName,\n          getPopupContainer: getPopupContainer,\n          builtinPlacements: _extends({}, placements, builtinPlacements),\n          popupPlacement: popupPlacement,\n          popupVisible: isOpen,\n          popupAlign: popupAlign,\n          popup: children,\n          action: disabled ? [] : [triggerSubMenuAction],\n          mouseEnterDelay: subMenuOpenDelay,\n          mouseLeaveDelay: subMenuCloseDelay,\n          onPopupVisibleChange: this.onPopupVisibleChange,\n          forceRender: forceSubMenuRender\n        },\n        title\n      )\n    );\n  };\n\n  return SubMenu;\n}(React.Component);\n\nSubMenu.propTypes = {\n  parentMenu: PropTypes.object,\n  title: PropTypes.node,\n  children: PropTypes.any,\n  selectedKeys: PropTypes.array,\n  openKeys: PropTypes.array,\n  onClick: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  rootPrefixCls: PropTypes.string,\n  eventKey: PropTypes.string,\n  multiple: PropTypes.bool,\n  active: PropTypes.bool, // TODO: remove\n  onItemHover: PropTypes.func,\n  onSelect: PropTypes.func,\n  triggerSubMenuAction: PropTypes.string,\n  onDeselect: PropTypes.func,\n  onDestroy: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onTitleMouseEnter: PropTypes.func,\n  onTitleMouseLeave: PropTypes.func,\n  onTitleClick: PropTypes.func,\n  popupOffset: PropTypes.array,\n  isOpen: PropTypes.bool,\n  store: PropTypes.object,\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  manualRef: PropTypes.func,\n  itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\n};\nSubMenu.defaultProps = {\n  onMouseEnter: noop,\n  onMouseLeave: noop,\n  onTitleMouseEnter: noop,\n  onTitleMouseLeave: noop,\n  onTitleClick: noop,\n  manualRef: noop,\n  mode: 'vertical',\n  title: ''\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onDestroy = function (key) {\n    _this3.props.onDestroy(key);\n  };\n\n  this.onKeyDown = function (e) {\n    var keyCode = e.keyCode;\n    var menu = _this3.menuInstance;\n    var _props3 = _this3.props,\n        isOpen = _props3.isOpen,\n        store = _props3.store;\n\n\n    if (keyCode === KeyCode.ENTER) {\n      _this3.onTitleClick(e);\n      updateDefaultActiveFirst(store, _this3.props.eventKey, true);\n      return true;\n    }\n\n    if (keyCode === KeyCode.RIGHT) {\n      if (isOpen) {\n        menu.onKeyDown(e);\n      } else {\n        _this3.triggerOpenChange(true);\n        // need to update current menu's defaultActiveFirst value\n        updateDefaultActiveFirst(store, _this3.props.eventKey, true);\n      }\n      return true;\n    }\n    if (keyCode === KeyCode.LEFT) {\n      var handled = void 0;\n      if (isOpen) {\n        handled = menu.onKeyDown(e);\n      } else {\n        return undefined;\n      }\n      if (!handled) {\n        _this3.triggerOpenChange(false);\n        handled = true;\n      }\n      return handled;\n    }\n\n    if (isOpen && (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN)) {\n      return menu.onKeyDown(e);\n    }\n  };\n\n  this.onOpenChange = function (e) {\n    _this3.props.onOpenChange(e);\n  };\n\n  this.onPopupVisibleChange = function (visible) {\n    _this3.triggerOpenChange(visible, visible ? 'mouseenter' : 'mouseleave');\n  };\n\n  this.onMouseEnter = function (e) {\n    var _props4 = _this3.props,\n        key = _props4.eventKey,\n        onMouseEnter = _props4.onMouseEnter,\n        store = _props4.store;\n\n    updateDefaultActiveFirst(store, _this3.props.eventKey, false);\n    onMouseEnter({\n      key: key,\n      domEvent: e\n    });\n  };\n\n  this.onMouseLeave = function (e) {\n    var _props5 = _this3.props,\n        parentMenu = _props5.parentMenu,\n        eventKey = _props5.eventKey,\n        onMouseLeave = _props5.onMouseLeave;\n\n    parentMenu.subMenuInstance = _this3;\n    onMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  };\n\n  this.onTitleMouseEnter = function (domEvent) {\n    var _props6 = _this3.props,\n        key = _props6.eventKey,\n        onItemHover = _props6.onItemHover,\n        onTitleMouseEnter = _props6.onTitleMouseEnter;\n\n    onItemHover({\n      key: key,\n      hover: true\n    });\n    onTitleMouseEnter({\n      key: key,\n      domEvent: domEvent\n    });\n  };\n\n  this.onTitleMouseLeave = function (e) {\n    var _props7 = _this3.props,\n        parentMenu = _props7.parentMenu,\n        eventKey = _props7.eventKey,\n        onItemHover = _props7.onItemHover,\n        onTitleMouseLeave = _props7.onTitleMouseLeave;\n\n    parentMenu.subMenuInstance = _this3;\n    onItemHover({\n      key: eventKey,\n      hover: false\n    });\n    onTitleMouseLeave({\n      key: eventKey,\n      domEvent: e\n    });\n  };\n\n  this.onTitleClick = function (e) {\n    var props = _this3.props;\n\n    props.onTitleClick({\n      key: props.eventKey,\n      domEvent: e\n    });\n    if (props.triggerSubMenuAction === 'hover') {\n      return;\n    }\n    _this3.triggerOpenChange(!props.isOpen, 'click');\n    updateDefaultActiveFirst(props.store, _this3.props.eventKey, false);\n  };\n\n  this.onSubMenuClick = function (info) {\n    // in the case of overflowed submenu\n    // onClick is not copied over\n    if (typeof _this3.props.onClick === 'function') {\n      _this3.props.onClick(_this3.addKeyPath(info));\n    }\n  };\n\n  this.onSelect = function (info) {\n    _this3.props.onSelect(info);\n  };\n\n  this.onDeselect = function (info) {\n    _this3.props.onDeselect(info);\n  };\n\n  this.getPrefixCls = function () {\n    return _this3.props.rootPrefixCls + '-submenu';\n  };\n\n  this.getActiveClassName = function () {\n    return _this3.getPrefixCls() + '-active';\n  };\n\n  this.getDisabledClassName = function () {\n    return _this3.getPrefixCls() + '-disabled';\n  };\n\n  this.getSelectedClassName = function () {\n    return _this3.getPrefixCls() + '-selected';\n  };\n\n  this.getOpenClassName = function () {\n    return _this3.props.rootPrefixCls + '-submenu-open';\n  };\n\n  this.saveMenuInstance = function (c) {\n    // children menu instance\n    _this3.menuInstance = c;\n  };\n\n  this.addKeyPath = function (info) {\n    return _extends({}, info, {\n      keyPath: (info.keyPath || []).concat(_this3.props.eventKey)\n    });\n  };\n\n  this.triggerOpenChange = function (open, type) {\n    var key = _this3.props.eventKey;\n    var openChange = function openChange() {\n      _this3.onOpenChange({\n        key: key,\n        item: _this3,\n        trigger: type,\n        open: open\n      });\n    };\n    if (type === 'mouseenter') {\n      // make sure mouseenter happen after other menu item's mouseleave\n      _this3.mouseenterTimeout = setTimeout(function () {\n        openChange();\n      }, 0);\n    } else {\n      openChange();\n    }\n  };\n\n  this.isChildrenSelected = function () {\n    var ret = { find: false };\n    loopMenuItemRecursively(_this3.props.children, _this3.props.selectedKeys, ret);\n    return ret.find;\n  };\n\n  this.isOpen = function () {\n    return _this3.props.openKeys.indexOf(_this3.props.eventKey) !== -1;\n  };\n\n  this.adjustWidth = function () {\n    /* istanbul ignore if */\n    if (!_this3.subMenuTitle || !_this3.menuInstance) {\n      return;\n    }\n    var popupMenu = ReactDOM.findDOMNode(_this3.menuInstance);\n    if (popupMenu.offsetWidth >= _this3.subMenuTitle.offsetWidth) {\n      return;\n    }\n\n    /* istanbul ignore next */\n    popupMenu.style.minWidth = _this3.subMenuTitle.offsetWidth + 'px';\n  };\n\n  this.saveSubMenuTitle = function (subMenuTitle) {\n    _this3.subMenuTitle = subMenuTitle;\n  };\n};\n\nvar connected = connect(function (_ref, _ref2) {\n  var openKeys = _ref.openKeys,\n      activeKey = _ref.activeKey,\n      selectedKeys = _ref.selectedKeys;\n  var eventKey = _ref2.eventKey,\n      subMenuKey = _ref2.subMenuKey;\n  return {\n    isOpen: openKeys.indexOf(eventKey) > -1,\n    active: activeKey[subMenuKey] === eventKey,\n    selectedKeys: selectedKeys\n  };\n})(SubMenu);\n\nconnected.isSubMenu = true;\n\nexport default connected;"]},"metadata":{},"sourceType":"module"}