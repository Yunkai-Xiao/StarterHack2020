{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport ContainerRender from 'rc-util/es/ContainerRender';\nimport Portal from 'rc-util/es/Portal';\nimport classNames from 'classnames';\nimport { getAlignFromPlacement, getAlignPopupClassName } from './utils';\nimport Popup from './Popup';\n\nfunction noop() {}\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nvar ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur', 'onContextMenu'];\nvar IS_REACT_16 = !!createPortal;\nvar contextTypes = {\n  rcTrigger: PropTypes.shape({\n    onPopupMouseDown: PropTypes.func\n  })\n};\n\nvar Trigger = function (_React$Component) {\n  _inherits(Trigger, _React$Component);\n\n  function Trigger(props) {\n    _classCallCheck(this, Trigger);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var popupVisible = void 0;\n\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n\n    _this.prevPopupVisible = popupVisible;\n    _this.state = {\n      popupVisible: popupVisible\n    };\n    return _this;\n  }\n\n  Trigger.prototype.getChildContext = function getChildContext() {\n    return {\n      rcTrigger: {\n        onPopupMouseDown: this.onPopupMouseDown\n      }\n    };\n  };\n\n  Trigger.prototype.componentWillMount = function componentWillMount() {\n    var _this2 = this;\n\n    ALL_HANDLERS.forEach(function (h) {\n      _this2['fire' + h] = function (e) {\n        _this2.fireEvents(h, e);\n      };\n    });\n  };\n\n  Trigger.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible\n    });\n  };\n\n  Trigger.prototype.componentWillReceiveProps = function componentWillReceiveProps(_ref) {\n    var popupVisible = _ref.popupVisible;\n\n    if (popupVisible !== undefined) {\n      this.setState({\n        popupVisible: popupVisible\n      });\n    }\n  };\n\n  Trigger.prototype.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    var props = this.props;\n    var state = this.state;\n\n    var triggerAfterPopupVisibleChange = function triggerAfterPopupVisibleChange() {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    };\n\n    if (!IS_REACT_16) {\n      this.renderComponent(null, triggerAfterPopupVisibleChange);\n    }\n\n    this.prevPopupVisible = prevState.popupVisible; // We must listen to `mousedown` or `touchstart`, edge case:\n    // https://github.com/ant-design/ant-design/issues/5804\n    // https://github.com/react-component/calendar/issues/250\n    // https://github.com/react-component/trigger/issues/50\n\n    if (state.popupVisible) {\n      var currentDocument = void 0;\n\n      if (!this.clickOutsideHandler && (this.isClickToHide() || this.isContextMenuToShow())) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument, 'mousedown', this.onDocumentClick);\n      } // always hide on mobile\n\n\n      if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument, 'touchstart', this.onDocumentClick);\n      } // close popup when trigger type contains 'onContextMenu' and document is scrolling.\n\n\n      if (!this.contextMenuOutsideHandler1 && this.isContextMenuToShow()) {\n        currentDocument = currentDocument || props.getDocument();\n        this.contextMenuOutsideHandler1 = addEventListener(currentDocument, 'scroll', this.onContextMenuClose);\n      } // close popup when trigger type contains 'onContextMenu' and window is blur.\n\n\n      if (!this.contextMenuOutsideHandler2 && this.isContextMenuToShow()) {\n        this.contextMenuOutsideHandler2 = addEventListener(window, 'blur', this.onContextMenuClose);\n      }\n\n      return;\n    }\n\n    this.clearOutsideHandler();\n  };\n\n  Trigger.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n    clearTimeout(this.mouseDownTimeout);\n  };\n\n  Trigger.prototype.getPopupDomNode = function getPopupDomNode() {\n    // for test\n    if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n\n    return null;\n  };\n\n  Trigger.prototype.getPopupAlign = function getPopupAlign() {\n    var props = this.props;\n    var popupPlacement = props.popupPlacement,\n        popupAlign = props.popupAlign,\n        builtinPlacements = props.builtinPlacements;\n\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n\n    return popupAlign;\n  };\n  /**\n   * @param popupVisible    Show or not the popup element\n   * @param event           SyntheticEvent, used for `pointAlign`\n   */\n\n\n  Trigger.prototype.setPopupVisible = function setPopupVisible(popupVisible, event) {\n    var alignPoint = this.props.alignPoint;\n    this.clearDelayTimer();\n\n    if (this.state.popupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({\n          popupVisible: popupVisible\n        });\n      }\n\n      this.props.onPopupVisibleChange(popupVisible);\n    } // Always record the point position since mouseEnterDelay will delay the show\n\n\n    if (alignPoint && event) {\n      this.setPoint(event);\n    }\n  };\n\n  Trigger.prototype.delaySetPopupVisible = function delaySetPopupVisible(visible, delayS, event) {\n    var _this3 = this;\n\n    var delay = delayS * 1000;\n    this.clearDelayTimer();\n\n    if (delay) {\n      var point = event ? {\n        pageX: event.pageX,\n        pageY: event.pageY\n      } : null;\n      this.delayTimer = setTimeout(function () {\n        _this3.setPopupVisible(visible, point);\n\n        _this3.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible, event);\n    }\n  };\n\n  Trigger.prototype.clearDelayTimer = function clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  };\n\n  Trigger.prototype.clearOutsideHandler = function clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.contextMenuOutsideHandler1) {\n      this.contextMenuOutsideHandler1.remove();\n      this.contextMenuOutsideHandler1 = null;\n    }\n\n    if (this.contextMenuOutsideHandler2) {\n      this.contextMenuOutsideHandler2.remove();\n      this.contextMenuOutsideHandler2 = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  };\n\n  Trigger.prototype.createTwoChains = function createTwoChains(event) {\n    var childPros = this.props.children.props;\n    var props = this.props;\n\n    if (childPros[event] && props[event]) {\n      return this['fire' + event];\n    }\n\n    return childPros[event] || props[event];\n  };\n\n  Trigger.prototype.isClickToShow = function isClickToShow() {\n    var _props = this.props,\n        action = _props.action,\n        showAction = _props.showAction;\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isContextMenuToShow = function isContextMenuToShow() {\n    var _props2 = this.props,\n        action = _props2.action,\n        showAction = _props2.showAction;\n    return action.indexOf('contextMenu') !== -1 || showAction.indexOf('contextMenu') !== -1;\n  };\n\n  Trigger.prototype.isClickToHide = function isClickToHide() {\n    var _props3 = this.props,\n        action = _props3.action,\n        hideAction = _props3.hideAction;\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isMouseEnterToShow = function isMouseEnterToShow() {\n    var _props4 = this.props,\n        action = _props4.action,\n        showAction = _props4.showAction;\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  };\n\n  Trigger.prototype.isMouseLeaveToHide = function isMouseLeaveToHide() {\n    var _props5 = this.props,\n        action = _props5.action,\n        hideAction = _props5.hideAction;\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  };\n\n  Trigger.prototype.isFocusToShow = function isFocusToShow() {\n    var _props6 = this.props,\n        action = _props6.action,\n        showAction = _props6.showAction;\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  };\n\n  Trigger.prototype.isBlurToHide = function isBlurToHide() {\n    var _props7 = this.props,\n        action = _props7.action,\n        hideAction = _props7.hideAction;\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  };\n\n  Trigger.prototype.forcePopupAlign = function forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  };\n\n  Trigger.prototype.fireEvents = function fireEvents(type, e) {\n    var childCallback = this.props.children.props[type];\n\n    if (childCallback) {\n      childCallback(e);\n    }\n\n    var callback = this.props[type];\n\n    if (callback) {\n      callback(e);\n    }\n  };\n\n  Trigger.prototype.close = function close() {\n    this.setPopupVisible(false);\n  };\n\n  Trigger.prototype.render = function render() {\n    var _this4 = this;\n\n    var popupVisible = this.state.popupVisible;\n    var _props8 = this.props,\n        children = _props8.children,\n        forceRender = _props8.forceRender,\n        alignPoint = _props8.alignPoint,\n        className = _props8.className;\n    var child = React.Children.only(children);\n    var newChildProps = {\n      key: 'trigger'\n    };\n\n    if (this.isContextMenuToShow()) {\n      newChildProps.onContextMenu = this.onContextMenu;\n    } else {\n      newChildProps.onContextMenu = this.createTwoChains('onContextMenu');\n    }\n\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n\n      if (alignPoint) {\n        newChildProps.onMouseMove = this.onMouseMove;\n      }\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    var childrenClassName = classNames(child && child.props && child.props.className, className);\n\n    if (childrenClassName) {\n      newChildProps.className = childrenClassName;\n    }\n\n    var trigger = React.cloneElement(child, newChildProps);\n\n    if (!IS_REACT_16) {\n      return React.createElement(ContainerRender, {\n        parent: this,\n        visible: popupVisible,\n        autoMount: false,\n        forceRender: forceRender,\n        getComponent: this.getComponent,\n        getContainer: this.getContainer\n      }, function (_ref2) {\n        var renderComponent = _ref2.renderComponent;\n        _this4.renderComponent = renderComponent;\n        return trigger;\n      });\n    }\n\n    var portal = void 0; // prevent unmounting after it's rendered\n\n    if (popupVisible || this._component || forceRender) {\n      portal = React.createElement(Portal, {\n        key: 'portal',\n        getContainer: this.getContainer,\n        didUpdate: this.handlePortalUpdate\n      }, this.getComponent());\n    }\n\n    return [trigger, portal];\n  };\n\n  return Trigger;\n}(React.Component);\n\nTrigger.propTypes = {\n  children: PropTypes.any,\n  action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  showAction: PropTypes.any,\n  hideAction: PropTypes.any,\n  getPopupClassNameFromAlign: PropTypes.any,\n  onPopupVisibleChange: PropTypes.func,\n  afterPopupVisibleChange: PropTypes.func,\n  popup: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  popupStyle: PropTypes.object,\n  prefixCls: PropTypes.string,\n  popupClassName: PropTypes.string,\n  className: PropTypes.string,\n  popupPlacement: PropTypes.string,\n  builtinPlacements: PropTypes.object,\n  popupTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  popupAnimation: PropTypes.any,\n  mouseEnterDelay: PropTypes.number,\n  mouseLeaveDelay: PropTypes.number,\n  zIndex: PropTypes.number,\n  focusDelay: PropTypes.number,\n  blurDelay: PropTypes.number,\n  getPopupContainer: PropTypes.func,\n  getDocument: PropTypes.func,\n  forceRender: PropTypes.bool,\n  destroyPopupOnHide: PropTypes.bool,\n  mask: PropTypes.bool,\n  maskClosable: PropTypes.bool,\n  onPopupAlign: PropTypes.func,\n  popupAlign: PropTypes.object,\n  popupVisible: PropTypes.bool,\n  defaultPopupVisible: PropTypes.bool,\n  maskTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  maskAnimation: PropTypes.string,\n  stretch: PropTypes.string,\n  alignPoint: PropTypes.bool // Maybe we can support user pass position in the future\n\n};\nTrigger.contextTypes = contextTypes;\nTrigger.childContextTypes = contextTypes;\nTrigger.defaultProps = {\n  prefixCls: 'rc-trigger-popup',\n  getPopupClassNameFromAlign: returnEmptyString,\n  getDocument: returnDocument,\n  onPopupVisibleChange: noop,\n  afterPopupVisibleChange: noop,\n  onPopupAlign: noop,\n  popupClassName: '',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0.1,\n  focusDelay: 0,\n  blurDelay: 0.15,\n  popupStyle: {},\n  destroyPopupOnHide: false,\n  popupAlign: {},\n  defaultPopupVisible: false,\n  mask: false,\n  maskClosable: true,\n  action: [],\n  showAction: [],\n  hideAction: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.onMouseEnter = function (e) {\n    var mouseEnterDelay = _this5.props.mouseEnterDelay;\n\n    _this5.fireEvents('onMouseEnter', e);\n\n    _this5.delaySetPopupVisible(true, mouseEnterDelay, mouseEnterDelay ? null : e);\n  };\n\n  this.onMouseMove = function (e) {\n    _this5.fireEvents('onMouseMove', e);\n\n    _this5.setPoint(e);\n  };\n\n  this.onMouseLeave = function (e) {\n    _this5.fireEvents('onMouseLeave', e);\n\n    _this5.delaySetPopupVisible(false, _this5.props.mouseLeaveDelay);\n  };\n\n  this.onPopupMouseEnter = function () {\n    _this5.clearDelayTimer();\n  };\n\n  this.onPopupMouseLeave = function (e) {\n    // https://github.com/react-component/trigger/pull/13\n    // react bug?\n    if (e.relatedTarget && !e.relatedTarget.setTimeout && _this5._component && _this5._component.getPopupDomNode && contains(_this5._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n\n    _this5.delaySetPopupVisible(false, _this5.props.mouseLeaveDelay);\n  };\n\n  this.onFocus = function (e) {\n    _this5.fireEvents('onFocus', e); // incase focusin and focusout\n\n\n    _this5.clearDelayTimer();\n\n    if (_this5.isFocusToShow()) {\n      _this5.focusTime = Date.now();\n\n      _this5.delaySetPopupVisible(true, _this5.props.focusDelay);\n    }\n  };\n\n  this.onMouseDown = function (e) {\n    _this5.fireEvents('onMouseDown', e);\n\n    _this5.preClickTime = Date.now();\n  };\n\n  this.onTouchStart = function (e) {\n    _this5.fireEvents('onTouchStart', e);\n\n    _this5.preTouchTime = Date.now();\n  };\n\n  this.onBlur = function (e) {\n    _this5.fireEvents('onBlur', e);\n\n    _this5.clearDelayTimer();\n\n    if (_this5.isBlurToHide()) {\n      _this5.delaySetPopupVisible(false, _this5.props.blurDelay);\n    }\n  };\n\n  this.onContextMenu = function (e) {\n    e.preventDefault();\n\n    _this5.fireEvents('onContextMenu', e);\n\n    _this5.setPopupVisible(true, e);\n  };\n\n  this.onContextMenuClose = function () {\n    if (_this5.isContextMenuToShow()) {\n      _this5.close();\n    }\n  };\n\n  this.onClick = function (event) {\n    _this5.fireEvents('onClick', event); // focus will trigger click\n\n\n    if (_this5.focusTime) {\n      var preTime = void 0;\n\n      if (_this5.preClickTime && _this5.preTouchTime) {\n        preTime = Math.min(_this5.preClickTime, _this5.preTouchTime);\n      } else if (_this5.preClickTime) {\n        preTime = _this5.preClickTime;\n      } else if (_this5.preTouchTime) {\n        preTime = _this5.preTouchTime;\n      }\n\n      if (Math.abs(preTime - _this5.focusTime) < 20) {\n        return;\n      }\n\n      _this5.focusTime = 0;\n    }\n\n    _this5.preClickTime = 0;\n    _this5.preTouchTime = 0;\n\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    var nextVisible = !_this5.state.popupVisible;\n\n    if (_this5.isClickToHide() && !nextVisible || nextVisible && _this5.isClickToShow()) {\n      _this5.setPopupVisible(!_this5.state.popupVisible, event);\n    }\n  };\n\n  this.onPopupMouseDown = function () {\n    var _context$rcTrigger = _this5.context.rcTrigger,\n        rcTrigger = _context$rcTrigger === undefined ? {} : _context$rcTrigger;\n    _this5.hasPopupMouseDown = true;\n    clearTimeout(_this5.mouseDownTimeout);\n    _this5.mouseDownTimeout = setTimeout(function () {\n      _this5.hasPopupMouseDown = false;\n    }, 0);\n\n    if (rcTrigger.onPopupMouseDown) {\n      rcTrigger.onPopupMouseDown.apply(rcTrigger, arguments);\n    }\n  };\n\n  this.onDocumentClick = function (event) {\n    if (_this5.props.mask && !_this5.props.maskClosable) {\n      return;\n    }\n\n    var target = event.target;\n    var root = findDOMNode(_this5);\n\n    if (!contains(root, target) && !_this5.hasPopupMouseDown) {\n      _this5.close();\n    }\n  };\n\n  this.getRootDomNode = function () {\n    return findDOMNode(_this5);\n  };\n\n  this.getPopupClassNameFromAlign = function (align) {\n    var className = [];\n    var _props9 = _this5.props,\n        popupPlacement = _props9.popupPlacement,\n        builtinPlacements = _props9.builtinPlacements,\n        prefixCls = _props9.prefixCls,\n        alignPoint = _props9.alignPoint,\n        getPopupClassNameFromAlign = _props9.getPopupClassNameFromAlign;\n\n    if (popupPlacement && builtinPlacements) {\n      className.push(getAlignPopupClassName(builtinPlacements, prefixCls, align, alignPoint));\n    }\n\n    if (getPopupClassNameFromAlign) {\n      className.push(getPopupClassNameFromAlign(align));\n    }\n\n    return className.join(' ');\n  };\n\n  this.getComponent = function () {\n    var _props10 = _this5.props,\n        prefixCls = _props10.prefixCls,\n        destroyPopupOnHide = _props10.destroyPopupOnHide,\n        popupClassName = _props10.popupClassName,\n        action = _props10.action,\n        onPopupAlign = _props10.onPopupAlign,\n        popupAnimation = _props10.popupAnimation,\n        popupTransitionName = _props10.popupTransitionName,\n        popupStyle = _props10.popupStyle,\n        mask = _props10.mask,\n        maskAnimation = _props10.maskAnimation,\n        maskTransitionName = _props10.maskTransitionName,\n        zIndex = _props10.zIndex,\n        popup = _props10.popup,\n        stretch = _props10.stretch,\n        alignPoint = _props10.alignPoint;\n    var _state = _this5.state,\n        popupVisible = _state.popupVisible,\n        point = _state.point;\n\n    var align = _this5.getPopupAlign();\n\n    var mouseProps = {};\n\n    if (_this5.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = _this5.onPopupMouseEnter;\n    }\n\n    if (_this5.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = _this5.onPopupMouseLeave;\n    }\n\n    mouseProps.onMouseDown = _this5.onPopupMouseDown;\n    mouseProps.onTouchStart = _this5.onPopupMouseDown;\n    return React.createElement(Popup, _extends({\n      prefixCls: prefixCls,\n      destroyPopupOnHide: destroyPopupOnHide,\n      visible: popupVisible,\n      point: alignPoint && point,\n      className: popupClassName,\n      action: action,\n      align: align,\n      onAlign: onPopupAlign,\n      animation: popupAnimation,\n      getClassNameFromAlign: _this5.getPopupClassNameFromAlign\n    }, mouseProps, {\n      stretch: stretch,\n      getRootDomNode: _this5.getRootDomNode,\n      style: popupStyle,\n      mask: mask,\n      zIndex: zIndex,\n      transitionName: popupTransitionName,\n      maskAnimation: maskAnimation,\n      maskTransitionName: maskTransitionName,\n      ref: _this5.savePopup\n    }), typeof popup === 'function' ? popup() : popup);\n  };\n\n  this.getContainer = function () {\n    var props = _this5.props;\n    var popupContainer = document.createElement('div'); // Make sure default popup container will never cause scrollbar appearing\n    // https://github.com/react-component/trigger/issues/41\n\n    popupContainer.style.position = 'absolute';\n    popupContainer.style.top = '0';\n    popupContainer.style.left = '0';\n    popupContainer.style.width = '100%';\n    var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(_this5)) : props.getDocument().body;\n    mountNode.appendChild(popupContainer);\n    return popupContainer;\n  };\n\n  this.setPoint = function (point) {\n    var alignPoint = _this5.props.alignPoint;\n    if (!alignPoint || !point) return;\n\n    _this5.setState({\n      point: {\n        pageX: point.pageX,\n        pageY: point.pageY\n      }\n    });\n  };\n\n  this.handlePortalUpdate = function () {\n    if (_this5.prevPopupVisible !== _this5.state.popupVisible) {\n      _this5.props.afterPopupVisibleChange(_this5.state.popupVisible);\n    }\n  };\n\n  this.savePopup = function (node) {\n    _this5._component = node;\n  };\n};\n\nexport default Trigger;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/StudyMate2/node_modules/rc-trigger/es/index.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","findDOMNode","createPortal","contains","addEventListener","ContainerRender","Portal","classNames","getAlignFromPlacement","getAlignPopupClassName","Popup","noop","returnEmptyString","returnDocument","window","document","ALL_HANDLERS","IS_REACT_16","contextTypes","rcTrigger","shape","onPopupMouseDown","func","Trigger","_React$Component","props","_this","call","_initialiseProps","popupVisible","defaultPopupVisible","prevPopupVisible","state","prototype","getChildContext","componentWillMount","_this2","forEach","h","e","fireEvents","componentDidMount","componentDidUpdate","componentWillReceiveProps","_ref","undefined","setState","_","prevState","triggerAfterPopupVisibleChange","afterPopupVisibleChange","renderComponent","currentDocument","clickOutsideHandler","isClickToHide","isContextMenuToShow","getDocument","onDocumentClick","touchOutsideHandler","contextMenuOutsideHandler1","onContextMenuClose","contextMenuOutsideHandler2","clearOutsideHandler","componentWillUnmount","clearDelayTimer","clearTimeout","mouseDownTimeout","getPopupDomNode","_component","getPopupAlign","popupPlacement","popupAlign","builtinPlacements","setPopupVisible","event","alignPoint","onPopupVisibleChange","setPoint","delaySetPopupVisible","visible","delayS","_this3","delay","point","pageX","pageY","delayTimer","setTimeout","remove","createTwoChains","childPros","children","isClickToShow","_props","action","showAction","indexOf","_props2","_props3","hideAction","isMouseEnterToShow","_props4","isMouseLeaveToHide","_props5","isFocusToShow","_props6","isBlurToHide","_props7","forcePopupAlign","alignInstance","forceAlign","type","childCallback","callback","close","render","_this4","_props8","forceRender","className","child","Children","only","newChildProps","key","onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseMove","onMouseLeave","onFocus","onBlur","childrenClassName","trigger","cloneElement","createElement","parent","autoMount","getComponent","getContainer","_ref2","portal","didUpdate","handlePortalUpdate","Component","propTypes","any","oneOfType","string","arrayOf","getPopupClassNameFromAlign","popup","node","isRequired","popupStyle","object","prefixCls","popupClassName","popupTransitionName","popupAnimation","mouseEnterDelay","number","mouseLeaveDelay","zIndex","focusDelay","blurDelay","getPopupContainer","bool","destroyPopupOnHide","mask","maskClosable","onPopupAlign","maskTransitionName","maskAnimation","stretch","childContextTypes","defaultProps","_this5","onPopupMouseEnter","onPopupMouseLeave","relatedTarget","focusTime","Date","now","preClickTime","preTouchTime","preventDefault","preTime","Math","min","abs","nextVisible","_context$rcTrigger","context","hasPopupMouseDown","apply","arguments","target","root","getRootDomNode","align","_props9","push","join","_props10","_state","mouseProps","onAlign","animation","getClassNameFromAlign","style","transitionName","ref","savePopup","popupContainer","position","top","left","width","mountNode","body","appendChild"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\nimport ContainerRender from 'rc-util/es/ContainerRender';\nimport Portal from 'rc-util/es/Portal';\nimport classNames from 'classnames';\n\nimport { getAlignFromPlacement, getAlignPopupClassName } from './utils';\nimport Popup from './Popup';\n\nfunction noop() {}\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nvar ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur', 'onContextMenu'];\n\nvar IS_REACT_16 = !!createPortal;\n\nvar contextTypes = {\n  rcTrigger: PropTypes.shape({\n    onPopupMouseDown: PropTypes.func\n  })\n};\n\nvar Trigger = function (_React$Component) {\n  _inherits(Trigger, _React$Component);\n\n  function Trigger(props) {\n    _classCallCheck(this, Trigger);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var popupVisible = void 0;\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n\n    _this.prevPopupVisible = popupVisible;\n\n    _this.state = {\n      popupVisible: popupVisible\n    };\n    return _this;\n  }\n\n  Trigger.prototype.getChildContext = function getChildContext() {\n    return {\n      rcTrigger: {\n        onPopupMouseDown: this.onPopupMouseDown\n      }\n    };\n  };\n\n  Trigger.prototype.componentWillMount = function componentWillMount() {\n    var _this2 = this;\n\n    ALL_HANDLERS.forEach(function (h) {\n      _this2['fire' + h] = function (e) {\n        _this2.fireEvents(h, e);\n      };\n    });\n  };\n\n  Trigger.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible\n    });\n  };\n\n  Trigger.prototype.componentWillReceiveProps = function componentWillReceiveProps(_ref) {\n    var popupVisible = _ref.popupVisible;\n\n    if (popupVisible !== undefined) {\n      this.setState({\n        popupVisible: popupVisible\n      });\n    }\n  };\n\n  Trigger.prototype.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    var props = this.props;\n    var state = this.state;\n    var triggerAfterPopupVisibleChange = function triggerAfterPopupVisibleChange() {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    };\n    if (!IS_REACT_16) {\n      this.renderComponent(null, triggerAfterPopupVisibleChange);\n    }\n\n    this.prevPopupVisible = prevState.popupVisible;\n\n    // We must listen to `mousedown` or `touchstart`, edge case:\n    // https://github.com/ant-design/ant-design/issues/5804\n    // https://github.com/react-component/calendar/issues/250\n    // https://github.com/react-component/trigger/issues/50\n    if (state.popupVisible) {\n      var currentDocument = void 0;\n      if (!this.clickOutsideHandler && (this.isClickToHide() || this.isContextMenuToShow())) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument, 'mousedown', this.onDocumentClick);\n      }\n      // always hide on mobile\n      if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument, 'touchstart', this.onDocumentClick);\n      }\n      // close popup when trigger type contains 'onContextMenu' and document is scrolling.\n      if (!this.contextMenuOutsideHandler1 && this.isContextMenuToShow()) {\n        currentDocument = currentDocument || props.getDocument();\n        this.contextMenuOutsideHandler1 = addEventListener(currentDocument, 'scroll', this.onContextMenuClose);\n      }\n      // close popup when trigger type contains 'onContextMenu' and window is blur.\n      if (!this.contextMenuOutsideHandler2 && this.isContextMenuToShow()) {\n        this.contextMenuOutsideHandler2 = addEventListener(window, 'blur', this.onContextMenuClose);\n      }\n      return;\n    }\n\n    this.clearOutsideHandler();\n  };\n\n  Trigger.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n    clearTimeout(this.mouseDownTimeout);\n  };\n\n  Trigger.prototype.getPopupDomNode = function getPopupDomNode() {\n    // for test\n    if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n    return null;\n  };\n\n  Trigger.prototype.getPopupAlign = function getPopupAlign() {\n    var props = this.props;\n    var popupPlacement = props.popupPlacement,\n        popupAlign = props.popupAlign,\n        builtinPlacements = props.builtinPlacements;\n\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n    return popupAlign;\n  };\n\n  /**\n   * @param popupVisible    Show or not the popup element\n   * @param event           SyntheticEvent, used for `pointAlign`\n   */\n  Trigger.prototype.setPopupVisible = function setPopupVisible(popupVisible, event) {\n    var alignPoint = this.props.alignPoint;\n\n\n    this.clearDelayTimer();\n\n    if (this.state.popupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({ popupVisible: popupVisible });\n      }\n      this.props.onPopupVisibleChange(popupVisible);\n    }\n\n    // Always record the point position since mouseEnterDelay will delay the show\n    if (alignPoint && event) {\n      this.setPoint(event);\n    }\n  };\n\n  Trigger.prototype.delaySetPopupVisible = function delaySetPopupVisible(visible, delayS, event) {\n    var _this3 = this;\n\n    var delay = delayS * 1000;\n    this.clearDelayTimer();\n    if (delay) {\n      var point = event ? { pageX: event.pageX, pageY: event.pageY } : null;\n      this.delayTimer = setTimeout(function () {\n        _this3.setPopupVisible(visible, point);\n        _this3.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible, event);\n    }\n  };\n\n  Trigger.prototype.clearDelayTimer = function clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  };\n\n  Trigger.prototype.clearOutsideHandler = function clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.contextMenuOutsideHandler1) {\n      this.contextMenuOutsideHandler1.remove();\n      this.contextMenuOutsideHandler1 = null;\n    }\n\n    if (this.contextMenuOutsideHandler2) {\n      this.contextMenuOutsideHandler2.remove();\n      this.contextMenuOutsideHandler2 = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  };\n\n  Trigger.prototype.createTwoChains = function createTwoChains(event) {\n    var childPros = this.props.children.props;\n    var props = this.props;\n    if (childPros[event] && props[event]) {\n      return this['fire' + event];\n    }\n    return childPros[event] || props[event];\n  };\n\n  Trigger.prototype.isClickToShow = function isClickToShow() {\n    var _props = this.props,\n        action = _props.action,\n        showAction = _props.showAction;\n\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isContextMenuToShow = function isContextMenuToShow() {\n    var _props2 = this.props,\n        action = _props2.action,\n        showAction = _props2.showAction;\n\n    return action.indexOf('contextMenu') !== -1 || showAction.indexOf('contextMenu') !== -1;\n  };\n\n  Trigger.prototype.isClickToHide = function isClickToHide() {\n    var _props3 = this.props,\n        action = _props3.action,\n        hideAction = _props3.hideAction;\n\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  };\n\n  Trigger.prototype.isMouseEnterToShow = function isMouseEnterToShow() {\n    var _props4 = this.props,\n        action = _props4.action,\n        showAction = _props4.showAction;\n\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  };\n\n  Trigger.prototype.isMouseLeaveToHide = function isMouseLeaveToHide() {\n    var _props5 = this.props,\n        action = _props5.action,\n        hideAction = _props5.hideAction;\n\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  };\n\n  Trigger.prototype.isFocusToShow = function isFocusToShow() {\n    var _props6 = this.props,\n        action = _props6.action,\n        showAction = _props6.showAction;\n\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  };\n\n  Trigger.prototype.isBlurToHide = function isBlurToHide() {\n    var _props7 = this.props,\n        action = _props7.action,\n        hideAction = _props7.hideAction;\n\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  };\n\n  Trigger.prototype.forcePopupAlign = function forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  };\n\n  Trigger.prototype.fireEvents = function fireEvents(type, e) {\n    var childCallback = this.props.children.props[type];\n    if (childCallback) {\n      childCallback(e);\n    }\n    var callback = this.props[type];\n    if (callback) {\n      callback(e);\n    }\n  };\n\n  Trigger.prototype.close = function close() {\n    this.setPopupVisible(false);\n  };\n\n  Trigger.prototype.render = function render() {\n    var _this4 = this;\n\n    var popupVisible = this.state.popupVisible;\n    var _props8 = this.props,\n        children = _props8.children,\n        forceRender = _props8.forceRender,\n        alignPoint = _props8.alignPoint,\n        className = _props8.className;\n\n    var child = React.Children.only(children);\n    var newChildProps = { key: 'trigger' };\n\n    if (this.isContextMenuToShow()) {\n      newChildProps.onContextMenu = this.onContextMenu;\n    } else {\n      newChildProps.onContextMenu = this.createTwoChains('onContextMenu');\n    }\n\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n      if (alignPoint) {\n        newChildProps.onMouseMove = this.onMouseMove;\n      }\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    var childrenClassName = classNames(child && child.props && child.props.className, className);\n    if (childrenClassName) {\n      newChildProps.className = childrenClassName;\n    }\n    var trigger = React.cloneElement(child, newChildProps);\n\n    if (!IS_REACT_16) {\n      return React.createElement(\n        ContainerRender,\n        {\n          parent: this,\n          visible: popupVisible,\n          autoMount: false,\n          forceRender: forceRender,\n          getComponent: this.getComponent,\n          getContainer: this.getContainer\n        },\n        function (_ref2) {\n          var renderComponent = _ref2.renderComponent;\n\n          _this4.renderComponent = renderComponent;\n          return trigger;\n        }\n      );\n    }\n\n    var portal = void 0;\n    // prevent unmounting after it's rendered\n    if (popupVisible || this._component || forceRender) {\n      portal = React.createElement(\n        Portal,\n        {\n          key: 'portal',\n          getContainer: this.getContainer,\n          didUpdate: this.handlePortalUpdate\n        },\n        this.getComponent()\n      );\n    }\n\n    return [trigger, portal];\n  };\n\n  return Trigger;\n}(React.Component);\n\nTrigger.propTypes = {\n  children: PropTypes.any,\n  action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  showAction: PropTypes.any,\n  hideAction: PropTypes.any,\n  getPopupClassNameFromAlign: PropTypes.any,\n  onPopupVisibleChange: PropTypes.func,\n  afterPopupVisibleChange: PropTypes.func,\n  popup: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n  popupStyle: PropTypes.object,\n  prefixCls: PropTypes.string,\n  popupClassName: PropTypes.string,\n  className: PropTypes.string,\n  popupPlacement: PropTypes.string,\n  builtinPlacements: PropTypes.object,\n  popupTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  popupAnimation: PropTypes.any,\n  mouseEnterDelay: PropTypes.number,\n  mouseLeaveDelay: PropTypes.number,\n  zIndex: PropTypes.number,\n  focusDelay: PropTypes.number,\n  blurDelay: PropTypes.number,\n  getPopupContainer: PropTypes.func,\n  getDocument: PropTypes.func,\n  forceRender: PropTypes.bool,\n  destroyPopupOnHide: PropTypes.bool,\n  mask: PropTypes.bool,\n  maskClosable: PropTypes.bool,\n  onPopupAlign: PropTypes.func,\n  popupAlign: PropTypes.object,\n  popupVisible: PropTypes.bool,\n  defaultPopupVisible: PropTypes.bool,\n  maskTransitionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  maskAnimation: PropTypes.string,\n  stretch: PropTypes.string,\n  alignPoint: PropTypes.bool // Maybe we can support user pass position in the future\n};\nTrigger.contextTypes = contextTypes;\nTrigger.childContextTypes = contextTypes;\nTrigger.defaultProps = {\n  prefixCls: 'rc-trigger-popup',\n  getPopupClassNameFromAlign: returnEmptyString,\n  getDocument: returnDocument,\n  onPopupVisibleChange: noop,\n  afterPopupVisibleChange: noop,\n  onPopupAlign: noop,\n  popupClassName: '',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0.1,\n  focusDelay: 0,\n  blurDelay: 0.15,\n  popupStyle: {},\n  destroyPopupOnHide: false,\n  popupAlign: {},\n  defaultPopupVisible: false,\n  mask: false,\n  maskClosable: true,\n  action: [],\n  showAction: [],\n  hideAction: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.onMouseEnter = function (e) {\n    var mouseEnterDelay = _this5.props.mouseEnterDelay;\n\n    _this5.fireEvents('onMouseEnter', e);\n    _this5.delaySetPopupVisible(true, mouseEnterDelay, mouseEnterDelay ? null : e);\n  };\n\n  this.onMouseMove = function (e) {\n    _this5.fireEvents('onMouseMove', e);\n    _this5.setPoint(e);\n  };\n\n  this.onMouseLeave = function (e) {\n    _this5.fireEvents('onMouseLeave', e);\n    _this5.delaySetPopupVisible(false, _this5.props.mouseLeaveDelay);\n  };\n\n  this.onPopupMouseEnter = function () {\n    _this5.clearDelayTimer();\n  };\n\n  this.onPopupMouseLeave = function (e) {\n    // https://github.com/react-component/trigger/pull/13\n    // react bug?\n    if (e.relatedTarget && !e.relatedTarget.setTimeout && _this5._component && _this5._component.getPopupDomNode && contains(_this5._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n    _this5.delaySetPopupVisible(false, _this5.props.mouseLeaveDelay);\n  };\n\n  this.onFocus = function (e) {\n    _this5.fireEvents('onFocus', e);\n    // incase focusin and focusout\n    _this5.clearDelayTimer();\n    if (_this5.isFocusToShow()) {\n      _this5.focusTime = Date.now();\n      _this5.delaySetPopupVisible(true, _this5.props.focusDelay);\n    }\n  };\n\n  this.onMouseDown = function (e) {\n    _this5.fireEvents('onMouseDown', e);\n    _this5.preClickTime = Date.now();\n  };\n\n  this.onTouchStart = function (e) {\n    _this5.fireEvents('onTouchStart', e);\n    _this5.preTouchTime = Date.now();\n  };\n\n  this.onBlur = function (e) {\n    _this5.fireEvents('onBlur', e);\n    _this5.clearDelayTimer();\n    if (_this5.isBlurToHide()) {\n      _this5.delaySetPopupVisible(false, _this5.props.blurDelay);\n    }\n  };\n\n  this.onContextMenu = function (e) {\n    e.preventDefault();\n    _this5.fireEvents('onContextMenu', e);\n    _this5.setPopupVisible(true, e);\n  };\n\n  this.onContextMenuClose = function () {\n    if (_this5.isContextMenuToShow()) {\n      _this5.close();\n    }\n  };\n\n  this.onClick = function (event) {\n    _this5.fireEvents('onClick', event);\n    // focus will trigger click\n    if (_this5.focusTime) {\n      var preTime = void 0;\n      if (_this5.preClickTime && _this5.preTouchTime) {\n        preTime = Math.min(_this5.preClickTime, _this5.preTouchTime);\n      } else if (_this5.preClickTime) {\n        preTime = _this5.preClickTime;\n      } else if (_this5.preTouchTime) {\n        preTime = _this5.preTouchTime;\n      }\n      if (Math.abs(preTime - _this5.focusTime) < 20) {\n        return;\n      }\n      _this5.focusTime = 0;\n    }\n    _this5.preClickTime = 0;\n    _this5.preTouchTime = 0;\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n    var nextVisible = !_this5.state.popupVisible;\n    if (_this5.isClickToHide() && !nextVisible || nextVisible && _this5.isClickToShow()) {\n      _this5.setPopupVisible(!_this5.state.popupVisible, event);\n    }\n  };\n\n  this.onPopupMouseDown = function () {\n    var _context$rcTrigger = _this5.context.rcTrigger,\n        rcTrigger = _context$rcTrigger === undefined ? {} : _context$rcTrigger;\n\n    _this5.hasPopupMouseDown = true;\n\n    clearTimeout(_this5.mouseDownTimeout);\n    _this5.mouseDownTimeout = setTimeout(function () {\n      _this5.hasPopupMouseDown = false;\n    }, 0);\n\n    if (rcTrigger.onPopupMouseDown) {\n      rcTrigger.onPopupMouseDown.apply(rcTrigger, arguments);\n    }\n  };\n\n  this.onDocumentClick = function (event) {\n    if (_this5.props.mask && !_this5.props.maskClosable) {\n      return;\n    }\n\n    var target = event.target;\n    var root = findDOMNode(_this5);\n    if (!contains(root, target) && !_this5.hasPopupMouseDown) {\n      _this5.close();\n    }\n  };\n\n  this.getRootDomNode = function () {\n    return findDOMNode(_this5);\n  };\n\n  this.getPopupClassNameFromAlign = function (align) {\n    var className = [];\n    var _props9 = _this5.props,\n        popupPlacement = _props9.popupPlacement,\n        builtinPlacements = _props9.builtinPlacements,\n        prefixCls = _props9.prefixCls,\n        alignPoint = _props9.alignPoint,\n        getPopupClassNameFromAlign = _props9.getPopupClassNameFromAlign;\n\n    if (popupPlacement && builtinPlacements) {\n      className.push(getAlignPopupClassName(builtinPlacements, prefixCls, align, alignPoint));\n    }\n    if (getPopupClassNameFromAlign) {\n      className.push(getPopupClassNameFromAlign(align));\n    }\n    return className.join(' ');\n  };\n\n  this.getComponent = function () {\n    var _props10 = _this5.props,\n        prefixCls = _props10.prefixCls,\n        destroyPopupOnHide = _props10.destroyPopupOnHide,\n        popupClassName = _props10.popupClassName,\n        action = _props10.action,\n        onPopupAlign = _props10.onPopupAlign,\n        popupAnimation = _props10.popupAnimation,\n        popupTransitionName = _props10.popupTransitionName,\n        popupStyle = _props10.popupStyle,\n        mask = _props10.mask,\n        maskAnimation = _props10.maskAnimation,\n        maskTransitionName = _props10.maskTransitionName,\n        zIndex = _props10.zIndex,\n        popup = _props10.popup,\n        stretch = _props10.stretch,\n        alignPoint = _props10.alignPoint;\n    var _state = _this5.state,\n        popupVisible = _state.popupVisible,\n        point = _state.point;\n\n\n    var align = _this5.getPopupAlign();\n\n    var mouseProps = {};\n    if (_this5.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = _this5.onPopupMouseEnter;\n    }\n    if (_this5.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = _this5.onPopupMouseLeave;\n    }\n\n    mouseProps.onMouseDown = _this5.onPopupMouseDown;\n    mouseProps.onTouchStart = _this5.onPopupMouseDown;\n\n    return React.createElement(\n      Popup,\n      _extends({\n        prefixCls: prefixCls,\n        destroyPopupOnHide: destroyPopupOnHide,\n        visible: popupVisible,\n        point: alignPoint && point,\n        className: popupClassName,\n        action: action,\n        align: align,\n        onAlign: onPopupAlign,\n        animation: popupAnimation,\n        getClassNameFromAlign: _this5.getPopupClassNameFromAlign\n      }, mouseProps, {\n        stretch: stretch,\n        getRootDomNode: _this5.getRootDomNode,\n        style: popupStyle,\n        mask: mask,\n        zIndex: zIndex,\n        transitionName: popupTransitionName,\n        maskAnimation: maskAnimation,\n        maskTransitionName: maskTransitionName,\n        ref: _this5.savePopup\n      }),\n      typeof popup === 'function' ? popup() : popup\n    );\n  };\n\n  this.getContainer = function () {\n    var props = _this5.props;\n\n    var popupContainer = document.createElement('div');\n    // Make sure default popup container will never cause scrollbar appearing\n    // https://github.com/react-component/trigger/issues/41\n    popupContainer.style.position = 'absolute';\n    popupContainer.style.top = '0';\n    popupContainer.style.left = '0';\n    popupContainer.style.width = '100%';\n    var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(_this5)) : props.getDocument().body;\n    mountNode.appendChild(popupContainer);\n    return popupContainer;\n  };\n\n  this.setPoint = function (point) {\n    var alignPoint = _this5.props.alignPoint;\n\n    if (!alignPoint || !point) return;\n\n    _this5.setState({\n      point: {\n        pageX: point.pageX,\n        pageY: point.pageY\n      }\n    });\n  };\n\n  this.handlePortalUpdate = function () {\n    if (_this5.prevPopupVisible !== _this5.state.popupVisible) {\n      _this5.props.afterPopupVisibleChange(_this5.state.popupVisible);\n    }\n  };\n\n  this.savePopup = function (node) {\n    _this5._component = node;\n  };\n};\n\nexport default Trigger;"]},"metadata":{},"sourceType":"module"}