{"ast":null,"code":"function loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n      var isFinished = !entryList.length;\n\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n\n  sequence();\n}\n\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    path = path || '';\n\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, '' + path + item.name + '/');\n        });\n      });\n    }\n  };\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = files[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var file = _step.value;\n\n      _traverseFileTree(file.webkitGetAsEntry());\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\nexport default traverseFileTree;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/StudyMate2/node_modules/rc-upload/es/traverseFileTree.js"],"names":["loopFiles","item","callback","dirReader","createReader","fileList","sequence","readEntries","entries","entryList","Array","prototype","slice","apply","concat","isFinished","length","traverseFileTree","files","isAccepted","_traverseFileTree","path","isFile","file","isDirectory","forEach","entryItem","name","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","value","webkitGetAsEntry","err"],"mappings":"AAAA,SAASA,SAAT,CAAmBC,IAAnB,EAAyBC,QAAzB,EAAmC;AACjC,MAAIC,SAAS,GAAGF,IAAI,CAACG,YAAL,EAAhB;AACA,MAAIC,QAAQ,GAAG,EAAf;;AAEA,WAASC,QAAT,GAAoB;AAClBH,IAAAA,SAAS,CAACI,WAAV,CAAsB,UAAUC,OAAV,EAAmB;AACvC,UAAIC,SAAS,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BL,OAA5B,CAAhB;AACAH,MAAAA,QAAQ,GAAGA,QAAQ,CAACS,MAAT,CAAgBL,SAAhB,CAAX,CAFuC,CAIvC;;AACA,UAAIM,UAAU,GAAG,CAACN,SAAS,CAACO,MAA5B;;AAEA,UAAID,UAAJ,EAAgB;AACdb,QAAAA,QAAQ,CAACG,QAAD,CAAR;AACD,OAFD,MAEO;AACLC,QAAAA,QAAQ;AACT;AACF,KAZD;AAaD;;AAEDA,EAAAA,QAAQ;AACT;;AAED,IAAIW,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,KAA1B,EAAiChB,QAAjC,EAA2CiB,UAA3C,EAAuD;AAC5E,MAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BnB,IAA3B,EAAiCoB,IAAjC,EAAuC;AAC7DA,IAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;;AACA,QAAIpB,IAAI,CAACqB,MAAT,EAAiB;AACfrB,MAAAA,IAAI,CAACsB,IAAL,CAAU,UAAUA,IAAV,EAAgB;AACxB,YAAIJ,UAAU,CAACI,IAAD,CAAd,EAAsB;AACpBrB,UAAAA,QAAQ,CAAC,CAACqB,IAAD,CAAD,CAAR;AACD;AACF,OAJD;AAKD,KAND,MAMO,IAAItB,IAAI,CAACuB,WAAT,EAAsB;AAC3BxB,MAAAA,SAAS,CAACC,IAAD,EAAO,UAAUO,OAAV,EAAmB;AACjCA,QAAAA,OAAO,CAACiB,OAAR,CAAgB,UAAUC,SAAV,EAAqB;AACnCN,UAAAA,iBAAiB,CAACM,SAAD,EAAY,KAAKL,IAAL,GAAYpB,IAAI,CAAC0B,IAAjB,GAAwB,GAApC,CAAjB;AACD,SAFD;AAGD,OAJQ,CAAT;AAKD;AACF,GAfD;;AAgBA,MAAIC,yBAAyB,GAAG,IAAhC;AACA,MAAIC,iBAAiB,GAAG,KAAxB;AACA,MAAIC,cAAc,GAAGC,SAArB;;AAEA,MAAI;AACF,SAAK,IAAIC,SAAS,GAAGd,KAAK,CAACe,MAAM,CAACC,QAAR,CAAL,EAAhB,EAA0CC,KAA/C,EAAsD,EAAEP,yBAAyB,GAAG,CAACO,KAAK,GAAGH,SAAS,CAACI,IAAV,EAAT,EAA2BC,IAAzD,CAAtD,EAAsHT,yBAAyB,GAAG,IAAlJ,EAAwJ;AACtJ,UAAIL,IAAI,GAAGY,KAAK,CAACG,KAAjB;;AAEAlB,MAAAA,iBAAiB,CAACG,IAAI,CAACgB,gBAAL,EAAD,CAAjB;AACD;AACF,GAND,CAME,OAAOC,GAAP,EAAY;AACZX,IAAAA,iBAAiB,GAAG,IAApB;AACAC,IAAAA,cAAc,GAAGU,GAAjB;AACD,GATD,SASU;AACR,QAAI;AACF,UAAI,CAACZ,yBAAD,IAA8BI,SAAS,CAAC,QAAD,CAA3C,EAAuD;AACrDA,QAAAA,SAAS,CAAC,QAAD,CAAT;AACD;AACF,KAJD,SAIU;AACR,UAAIH,iBAAJ,EAAuB;AACrB,cAAMC,cAAN;AACD;AACF;AACF;AACF,CAzCD;;AA2CA,eAAeb,gBAAf","sourcesContent":["function loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList);\n\n      // Check if all the file has been viewed\n      var isFinished = !entryList.length;\n\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n\n  sequence();\n}\n\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    path = path || '';\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, '' + path + item.name + '/');\n        });\n      });\n    }\n  };\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = files[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var file = _step.value;\n\n      _traverseFileTree(file.webkitGetAsEntry());\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\nexport default traverseFileTree;"]},"metadata":{},"sourceType":"module"}