{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider, create } from 'mini-store';\nimport { default as SubPopupMenu, getActiveKey } from './SubPopupMenu';\nimport { noop } from './util';\n\nvar Menu = function (_React$Component) {\n  _inherits(Menu, _React$Component);\n\n  function Menu(props) {\n    _classCallCheck(this, Menu);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.isRootMenu = true;\n    var selectedKeys = props.defaultSelectedKeys;\n    var openKeys = props.defaultOpenKeys;\n\n    if ('selectedKeys' in props) {\n      selectedKeys = props.selectedKeys || [];\n    }\n\n    if ('openKeys' in props) {\n      openKeys = props.openKeys || [];\n    }\n\n    _this.store = create({\n      selectedKeys: selectedKeys,\n      openKeys: openKeys,\n      activeKey: {\n        '0-menu-': getActiveKey(props, props.activeKey)\n      }\n    });\n    return _this;\n  }\n\n  Menu.prototype.componentDidMount = function componentDidMount() {\n    this.updateMiniStore();\n  };\n\n  Menu.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.updateMiniStore();\n  }; // onKeyDown needs to be exposed as a instance method\n  // e.g., in rc-select, we need to navigate menu item while\n  // current active item is rc-select input box rather than the menu itself\n\n\n  Menu.prototype.updateMiniStore = function updateMiniStore() {\n    if ('selectedKeys' in this.props) {\n      this.store.setState({\n        selectedKeys: this.props.selectedKeys || []\n      });\n    }\n\n    if ('openKeys' in this.props) {\n      this.store.setState({\n        openKeys: this.props.openKeys || []\n      });\n    }\n  };\n\n  Menu.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = _objectWithoutProperties(this.props, []);\n\n    props.className += ' ' + props.prefixCls + '-root';\n    props = _extends({}, props, {\n      onClick: this.onClick,\n      onOpenChange: this.onOpenChange,\n      onDeselect: this.onDeselect,\n      onSelect: this.onSelect,\n      openTransitionName: this.getOpenTransitionName(),\n      parentMenu: this\n    });\n    return React.createElement(Provider, {\n      store: this.store\n    }, React.createElement(SubPopupMenu, _extends({}, props, {\n      ref: function ref(c) {\n        return _this2.innerMenu = c;\n      }\n    }), this.props.children));\n  };\n\n  return Menu;\n}(React.Component);\n\nMenu.propTypes = {\n  defaultSelectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultActiveFirst: PropTypes.bool,\n  selectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\n  openKeys: PropTypes.arrayOf(PropTypes.string),\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  getPopupContainer: PropTypes.func,\n  onClick: PropTypes.func,\n  onSelect: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onDestroy: PropTypes.func,\n  openTransitionName: PropTypes.string,\n  openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  subMenuOpenDelay: PropTypes.number,\n  subMenuCloseDelay: PropTypes.number,\n  forceSubMenuRender: PropTypes.bool,\n  triggerSubMenuAction: PropTypes.string,\n  level: PropTypes.number,\n  selectable: PropTypes.bool,\n  multiple: PropTypes.bool,\n  children: PropTypes.any,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  activeKey: PropTypes.string,\n  prefixCls: PropTypes.string,\n  builtinPlacements: PropTypes.object,\n  itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  overflowedIndicator: PropTypes.node\n};\nMenu.defaultProps = {\n  selectable: true,\n  onClick: noop,\n  onSelect: noop,\n  onOpenChange: noop,\n  onDeselect: noop,\n  defaultSelectedKeys: [],\n  defaultOpenKeys: [],\n  subMenuOpenDelay: 0.1,\n  subMenuCloseDelay: 0.1,\n  triggerSubMenuAction: 'hover',\n  prefixCls: 'rc-menu',\n  className: '',\n  mode: 'vertical',\n  style: {},\n  builtinPlacements: {},\n  overflowedIndicator: React.createElement('span', null, '\\xB7\\xB7\\xB7')\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onSelect = function (selectInfo) {\n    var props = _this3.props;\n\n    if (props.selectable) {\n      // root menu\n      var selectedKeys = _this3.store.getState().selectedKeys;\n\n      var selectedKey = selectInfo.key;\n\n      if (props.multiple) {\n        selectedKeys = selectedKeys.concat([selectedKey]);\n      } else {\n        selectedKeys = [selectedKey];\n      }\n\n      if (!('selectedKeys' in props)) {\n        _this3.store.setState({\n          selectedKeys: selectedKeys\n        });\n      }\n\n      props.onSelect(_extends({}, selectInfo, {\n        selectedKeys: selectedKeys\n      }));\n    }\n  };\n\n  this.onClick = function (e) {\n    _this3.props.onClick(e);\n  };\n\n  this.onKeyDown = function (e, callback) {\n    _this3.innerMenu.getWrappedInstance().onKeyDown(e, callback);\n  };\n\n  this.onOpenChange = function (event) {\n    var props = _this3.props;\n\n    var openKeys = _this3.store.getState().openKeys.concat();\n\n    var changed = false;\n\n    var processSingle = function processSingle(e) {\n      var oneChanged = false;\n\n      if (e.open) {\n        oneChanged = openKeys.indexOf(e.key) === -1;\n\n        if (oneChanged) {\n          openKeys.push(e.key);\n        }\n      } else {\n        var index = openKeys.indexOf(e.key);\n        oneChanged = index !== -1;\n\n        if (oneChanged) {\n          openKeys.splice(index, 1);\n        }\n      }\n\n      changed = changed || oneChanged;\n    };\n\n    if (Array.isArray(event)) {\n      // batch change call\n      event.forEach(processSingle);\n    } else {\n      processSingle(event);\n    }\n\n    if (changed) {\n      if (!('openKeys' in _this3.props)) {\n        _this3.store.setState({\n          openKeys: openKeys\n        });\n      }\n\n      props.onOpenChange(openKeys);\n    }\n  };\n\n  this.onDeselect = function (selectInfo) {\n    var props = _this3.props;\n\n    if (props.selectable) {\n      var selectedKeys = _this3.store.getState().selectedKeys.concat();\n\n      var selectedKey = selectInfo.key;\n      var index = selectedKeys.indexOf(selectedKey);\n\n      if (index !== -1) {\n        selectedKeys.splice(index, 1);\n      }\n\n      if (!('selectedKeys' in props)) {\n        _this3.store.setState({\n          selectedKeys: selectedKeys\n        });\n      }\n\n      props.onDeselect(_extends({}, selectInfo, {\n        selectedKeys: selectedKeys\n      }));\n    }\n  };\n\n  this.getOpenTransitionName = function () {\n    var props = _this3.props;\n    var transitionName = props.openTransitionName;\n    var animationName = props.openAnimation;\n\n    if (!transitionName && typeof animationName === 'string') {\n      transitionName = props.prefixCls + '-open-' + animationName;\n    }\n\n    return transitionName;\n  };\n};\n\nexport default Menu;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/StudyMate2/node_modules/rc-menu/es/Menu.js"],"names":["_extends","_objectWithoutProperties","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","Provider","create","default","SubPopupMenu","getActiveKey","noop","Menu","_React$Component","props","_this","call","_initialiseProps","isRootMenu","selectedKeys","defaultSelectedKeys","openKeys","defaultOpenKeys","store","activeKey","prototype","componentDidMount","updateMiniStore","componentDidUpdate","setState","render","_this2","className","prefixCls","onClick","onOpenChange","onDeselect","onSelect","openTransitionName","getOpenTransitionName","parentMenu","createElement","ref","c","innerMenu","children","Component","propTypes","arrayOf","string","defaultActiveFirst","bool","mode","oneOf","getPopupContainer","func","onDestroy","openAnimation","oneOfType","object","subMenuOpenDelay","number","subMenuCloseDelay","forceSubMenuRender","triggerSubMenuAction","level","selectable","multiple","any","style","builtinPlacements","itemIcon","node","expandIcon","overflowedIndicator","defaultProps","_this3","selectInfo","getState","selectedKey","key","concat","e","onKeyDown","callback","getWrappedInstance","event","changed","processSingle","oneChanged","open","indexOf","push","index","splice","Array","isArray","forEach","transitionName","animationName"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider, create } from 'mini-store';\nimport { default as SubPopupMenu, getActiveKey } from './SubPopupMenu';\nimport { noop } from './util';\n\nvar Menu = function (_React$Component) {\n  _inherits(Menu, _React$Component);\n\n  function Menu(props) {\n    _classCallCheck(this, Menu);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.isRootMenu = true;\n\n    var selectedKeys = props.defaultSelectedKeys;\n    var openKeys = props.defaultOpenKeys;\n    if ('selectedKeys' in props) {\n      selectedKeys = props.selectedKeys || [];\n    }\n    if ('openKeys' in props) {\n      openKeys = props.openKeys || [];\n    }\n\n    _this.store = create({\n      selectedKeys: selectedKeys,\n      openKeys: openKeys,\n      activeKey: { '0-menu-': getActiveKey(props, props.activeKey) }\n    });\n    return _this;\n  }\n\n  Menu.prototype.componentDidMount = function componentDidMount() {\n    this.updateMiniStore();\n  };\n\n  Menu.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.updateMiniStore();\n  };\n\n  // onKeyDown needs to be exposed as a instance method\n  // e.g., in rc-select, we need to navigate menu item while\n  // current active item is rc-select input box rather than the menu itself\n\n\n  Menu.prototype.updateMiniStore = function updateMiniStore() {\n    if ('selectedKeys' in this.props) {\n      this.store.setState({\n        selectedKeys: this.props.selectedKeys || []\n      });\n    }\n    if ('openKeys' in this.props) {\n      this.store.setState({\n        openKeys: this.props.openKeys || []\n      });\n    }\n  };\n\n  Menu.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = _objectWithoutProperties(this.props, []);\n\n    props.className += ' ' + props.prefixCls + '-root';\n    props = _extends({}, props, {\n      onClick: this.onClick,\n      onOpenChange: this.onOpenChange,\n      onDeselect: this.onDeselect,\n      onSelect: this.onSelect,\n      openTransitionName: this.getOpenTransitionName(),\n      parentMenu: this\n    });\n    return React.createElement(\n      Provider,\n      { store: this.store },\n      React.createElement(\n        SubPopupMenu,\n        _extends({}, props, { ref: function ref(c) {\n            return _this2.innerMenu = c;\n          } }),\n        this.props.children\n      )\n    );\n  };\n\n  return Menu;\n}(React.Component);\n\nMenu.propTypes = {\n  defaultSelectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultActiveFirst: PropTypes.bool,\n  selectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\n  openKeys: PropTypes.arrayOf(PropTypes.string),\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  getPopupContainer: PropTypes.func,\n  onClick: PropTypes.func,\n  onSelect: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onDestroy: PropTypes.func,\n  openTransitionName: PropTypes.string,\n  openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  subMenuOpenDelay: PropTypes.number,\n  subMenuCloseDelay: PropTypes.number,\n  forceSubMenuRender: PropTypes.bool,\n  triggerSubMenuAction: PropTypes.string,\n  level: PropTypes.number,\n  selectable: PropTypes.bool,\n  multiple: PropTypes.bool,\n  children: PropTypes.any,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  activeKey: PropTypes.string,\n  prefixCls: PropTypes.string,\n  builtinPlacements: PropTypes.object,\n  itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  overflowedIndicator: PropTypes.node\n};\nMenu.defaultProps = {\n  selectable: true,\n  onClick: noop,\n  onSelect: noop,\n  onOpenChange: noop,\n  onDeselect: noop,\n  defaultSelectedKeys: [],\n  defaultOpenKeys: [],\n  subMenuOpenDelay: 0.1,\n  subMenuCloseDelay: 0.1,\n  triggerSubMenuAction: 'hover',\n  prefixCls: 'rc-menu',\n  className: '',\n  mode: 'vertical',\n  style: {},\n  builtinPlacements: {},\n  overflowedIndicator: React.createElement(\n    'span',\n    null,\n    '\\xB7\\xB7\\xB7'\n  )\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onSelect = function (selectInfo) {\n    var props = _this3.props;\n    if (props.selectable) {\n      // root menu\n      var selectedKeys = _this3.store.getState().selectedKeys;\n      var selectedKey = selectInfo.key;\n      if (props.multiple) {\n        selectedKeys = selectedKeys.concat([selectedKey]);\n      } else {\n        selectedKeys = [selectedKey];\n      }\n      if (!('selectedKeys' in props)) {\n        _this3.store.setState({\n          selectedKeys: selectedKeys\n        });\n      }\n      props.onSelect(_extends({}, selectInfo, {\n        selectedKeys: selectedKeys\n      }));\n    }\n  };\n\n  this.onClick = function (e) {\n    _this3.props.onClick(e);\n  };\n\n  this.onKeyDown = function (e, callback) {\n    _this3.innerMenu.getWrappedInstance().onKeyDown(e, callback);\n  };\n\n  this.onOpenChange = function (event) {\n    var props = _this3.props;\n    var openKeys = _this3.store.getState().openKeys.concat();\n    var changed = false;\n    var processSingle = function processSingle(e) {\n      var oneChanged = false;\n      if (e.open) {\n        oneChanged = openKeys.indexOf(e.key) === -1;\n        if (oneChanged) {\n          openKeys.push(e.key);\n        }\n      } else {\n        var index = openKeys.indexOf(e.key);\n        oneChanged = index !== -1;\n        if (oneChanged) {\n          openKeys.splice(index, 1);\n        }\n      }\n      changed = changed || oneChanged;\n    };\n    if (Array.isArray(event)) {\n      // batch change call\n      event.forEach(processSingle);\n    } else {\n      processSingle(event);\n    }\n    if (changed) {\n      if (!('openKeys' in _this3.props)) {\n        _this3.store.setState({ openKeys: openKeys });\n      }\n      props.onOpenChange(openKeys);\n    }\n  };\n\n  this.onDeselect = function (selectInfo) {\n    var props = _this3.props;\n    if (props.selectable) {\n      var selectedKeys = _this3.store.getState().selectedKeys.concat();\n      var selectedKey = selectInfo.key;\n      var index = selectedKeys.indexOf(selectedKey);\n      if (index !== -1) {\n        selectedKeys.splice(index, 1);\n      }\n      if (!('selectedKeys' in props)) {\n        _this3.store.setState({\n          selectedKeys: selectedKeys\n        });\n      }\n      props.onDeselect(_extends({}, selectInfo, {\n        selectedKeys: selectedKeys\n      }));\n    }\n  };\n\n  this.getOpenTransitionName = function () {\n    var props = _this3.props;\n    var transitionName = props.openTransitionName;\n    var animationName = props.openAnimation;\n    if (!transitionName && typeof animationName === 'string') {\n      transitionName = props.prefixCls + '-open-' + animationName;\n    }\n    return transitionName;\n  };\n};\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}