{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nimport { setTransitionProperty, getTransitionProperty, getTransformXY, setTransformXY, getTransformName } from './propertyUtils';\nvar RE_NUM = /[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source;\nvar getComputedStyleX = void 0; // https://stackoverflow.com/a/3485654/3040605\n\nfunction forceRelayout(elem) {\n  var originalStyle = elem.style.display;\n  elem.style.display = 'none';\n  elem.offsetHeight; // eslint-disable-line\n\n  elem.style.display = originalStyle;\n}\n\nfunction css(el, name, v) {\n  var value = v;\n\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    for (var i in name) {\n      if (name.hasOwnProperty(i)) {\n        css(el, i, name[i]);\n      }\n    }\n\n    return undefined;\n  }\n\n  if (typeof value !== 'undefined') {\n    if (typeof value === 'number') {\n      value = value + 'px';\n    }\n\n    el.style[name] = value;\n    return undefined;\n  }\n\n  return getComputedStyleX(el, name);\n}\n\nfunction getClientPosition(elem) {\n  var box = void 0;\n  var x = void 0;\n  var y = void 0;\n  var doc = elem.ownerDocument;\n  var body = doc.body;\n  var docElem = doc && doc.documentElement; // 根据 GBS 最新数据，A-Grade Browsers 都已支持 getBoundingClientRect 方法，不用再考虑传统的实现方式\n\n  box = elem.getBoundingClientRect(); // 注：jQuery 还考虑减去 docElem.clientLeft/clientTop\n  // 但测试发现，这样反而会导致当 html 和 body 有边距/边框样式时，获取的值不正确\n  // 此外，ie6 会忽略 html 的 margin 值，幸运地是没有谁会去设置 html 的 margin\n\n  x = box.left;\n  y = box.top; // In IE, most of the time, 2 extra pixels are added to the top and left\n  // due to the implicit 2-pixel inset border.  In IE6/7 quirks mode and\n  // IE6 standards mode, this border can be overridden by setting the\n  // document element's border to zero -- thus, we cannot rely on the\n  // offset always being 2 pixels.\n  // In quirks mode, the offset can be determined by querying the body's\n  // clientLeft/clientTop, but in standards mode, it is found by querying\n  // the document element's clientLeft/clientTop.  Since we already called\n  // getClientBoundingRect we have already forced a reflow, so it is not\n  // too expensive just to query them all.\n  // ie 下应该减去窗口的边框吧，毕竟默认 absolute 都是相对窗口定位的\n  // 窗口边框标准是设 documentElement ,quirks 时设置 body\n  // 最好禁止在 body 和 html 上边框 ，但 ie < 9 html 默认有 2px ，减去\n  // 但是非 ie 不可能设置窗口边框，body html 也不是窗口 ,ie 可以通过 html,body 设置\n  // 标准 ie 下 docElem.clientTop 就是 border-top\n  // ie7 html 即窗口边框改变不了。永远为 2\n  // 但标准 firefox/chrome/ie9 下 docElem.clientTop 是窗口边框，即使设了 border-top 也为 0\n\n  x -= docElem.clientLeft || body.clientLeft || 0;\n  y -= docElem.clientTop || body.clientTop || 0;\n  return {\n    left: x,\n    top: y\n  };\n}\n\nfunction getScroll(w, top) {\n  var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n  var method = 'scroll' + (top ? 'Top' : 'Left');\n\n  if (typeof ret !== 'number') {\n    var d = w.document; // ie6,7,8 standard mode\n\n    ret = d.documentElement[method];\n\n    if (typeof ret !== 'number') {\n      // quirks mode\n      ret = d.body[method];\n    }\n  }\n\n  return ret;\n}\n\nfunction getScrollLeft(w) {\n  return getScroll(w);\n}\n\nfunction getScrollTop(w) {\n  return getScroll(w, true);\n}\n\nfunction getOffset(el) {\n  var pos = getClientPosition(el);\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScrollLeft(w);\n  pos.top += getScrollTop(w);\n  return pos;\n}\n/**\n * A crude way of determining if an object is a window\n * @member util\n */\n\n\nfunction isWindow(obj) {\n  // must use == for ie8\n\n  /* eslint eqeqeq:0 */\n  return obj !== null && obj !== undefined && obj == obj.window;\n}\n\nfunction getDocument(node) {\n  if (isWindow(node)) {\n    return node.document;\n  }\n\n  if (node.nodeType === 9) {\n    return node;\n  }\n\n  return node.ownerDocument;\n}\n\nfunction _getComputedStyle(elem, name, cs) {\n  var computedStyle = cs;\n  var val = '';\n  var d = getDocument(elem);\n  computedStyle = computedStyle || d.defaultView.getComputedStyle(elem, null); // https://github.com/kissyteam/kissy/issues/61\n\n  if (computedStyle) {\n    val = computedStyle.getPropertyValue(name) || computedStyle[name];\n  }\n\n  return val;\n}\n\nvar _RE_NUM_NO_PX = new RegExp('^(' + RE_NUM + ')(?!px)[a-z%]+$', 'i');\n\nvar RE_POS = /^(top|right|bottom|left)$/;\nvar CURRENT_STYLE = 'currentStyle';\nvar RUNTIME_STYLE = 'runtimeStyle';\nvar LEFT = 'left';\nvar PX = 'px';\n\nfunction _getComputedStyleIE(elem, name) {\n  // currentStyle maybe null\n  // http://msdn.microsoft.com/en-us/library/ms535231.aspx\n  var ret = elem[CURRENT_STYLE] && elem[CURRENT_STYLE][name]; // 当 width/height 设置为百分比时，通过 pixelLeft 方式转换的 width/height 值\n  // 一开始就处理了! CUSTOM_STYLE.height,CUSTOM_STYLE.width ,cssHook 解决@2011-08-19\n  // 在 ie 下不对，需要直接用 offset 方式\n  // borderWidth 等值也有问题，但考虑到 borderWidth 设为百分比的概率很小，这里就不考虑了\n  // From the awesome hack by Dean Edwards\n  // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n  // If we're not dealing with a regular pixel number\n  // but a number that has a weird ending, we need to convert it to pixels\n  // exclude left right for relativity\n\n  if (_RE_NUM_NO_PX.test(ret) && !RE_POS.test(name)) {\n    // Remember the original values\n    var style = elem.style;\n    var left = style[LEFT];\n    var rsLeft = elem[RUNTIME_STYLE][LEFT]; // prevent flashing of content\n\n    elem[RUNTIME_STYLE][LEFT] = elem[CURRENT_STYLE][LEFT]; // Put in the new values to get a computed value out\n\n    style[LEFT] = name === 'fontSize' ? '1em' : ret || 0;\n    ret = style.pixelLeft + PX; // Revert the changed values\n\n    style[LEFT] = left;\n    elem[RUNTIME_STYLE][LEFT] = rsLeft;\n  }\n\n  return ret === '' ? 'auto' : ret;\n}\n\nif (typeof window !== 'undefined') {\n  getComputedStyleX = window.getComputedStyle ? _getComputedStyle : _getComputedStyleIE;\n}\n\nfunction getOffsetDirection(dir, option) {\n  if (dir === 'left') {\n    return option.useCssRight ? 'right' : dir;\n  }\n\n  return option.useCssBottom ? 'bottom' : dir;\n}\n\nfunction oppositeOffsetDirection(dir) {\n  if (dir === 'left') {\n    return 'right';\n  } else if (dir === 'right') {\n    return 'left';\n  } else if (dir === 'top') {\n    return 'bottom';\n  } else if (dir === 'bottom') {\n    return 'top';\n  }\n} // 设置 elem 相对 elem.ownerDocument 的坐标\n\n\nfunction setLeftTop(elem, offset, option) {\n  // set position first, in-case top/left are set even on static elem\n  if (css(elem, 'position') === 'static') {\n    elem.style.position = 'relative';\n  }\n\n  var presetH = -999;\n  var presetV = -999;\n  var horizontalProperty = getOffsetDirection('left', option);\n  var verticalProperty = getOffsetDirection('top', option);\n  var oppositeHorizontalProperty = oppositeOffsetDirection(horizontalProperty);\n  var oppositeVerticalProperty = oppositeOffsetDirection(verticalProperty);\n\n  if (horizontalProperty !== 'left') {\n    presetH = 999;\n  }\n\n  if (verticalProperty !== 'top') {\n    presetV = 999;\n  }\n\n  var originalTransition = '';\n  var originalOffset = getOffset(elem);\n\n  if ('left' in offset || 'top' in offset) {\n    originalTransition = getTransitionProperty(elem) || '';\n    setTransitionProperty(elem, 'none');\n  }\n\n  if ('left' in offset) {\n    elem.style[oppositeHorizontalProperty] = '';\n    elem.style[horizontalProperty] = presetH + 'px';\n  }\n\n  if ('top' in offset) {\n    elem.style[oppositeVerticalProperty] = '';\n    elem.style[verticalProperty] = presetV + 'px';\n  } // force relayout\n\n\n  forceRelayout(elem);\n  var old = getOffset(elem);\n  var originalStyle = {};\n\n  for (var key in offset) {\n    if (offset.hasOwnProperty(key)) {\n      var dir = getOffsetDirection(key, option);\n      var preset = key === 'left' ? presetH : presetV;\n      var off = originalOffset[key] - old[key];\n\n      if (dir === key) {\n        originalStyle[dir] = preset + off;\n      } else {\n        originalStyle[dir] = preset - off;\n      }\n    }\n  }\n\n  css(elem, originalStyle); // force relayout\n\n  forceRelayout(elem);\n\n  if ('left' in offset || 'top' in offset) {\n    setTransitionProperty(elem, originalTransition);\n  }\n\n  var ret = {};\n\n  for (var _key in offset) {\n    if (offset.hasOwnProperty(_key)) {\n      var _dir = getOffsetDirection(_key, option);\n\n      var _off = offset[_key] - originalOffset[_key];\n\n      if (_key === _dir) {\n        ret[_dir] = originalStyle[_dir] + _off;\n      } else {\n        ret[_dir] = originalStyle[_dir] - _off;\n      }\n    }\n  }\n\n  css(elem, ret);\n}\n\nfunction setTransform(elem, offset) {\n  var originalOffset = getOffset(elem);\n  var originalXY = getTransformXY(elem);\n  var resultXY = {\n    x: originalXY.x,\n    y: originalXY.y\n  };\n\n  if ('left' in offset) {\n    resultXY.x = originalXY.x + offset.left - originalOffset.left;\n  }\n\n  if ('top' in offset) {\n    resultXY.y = originalXY.y + offset.top - originalOffset.top;\n  }\n\n  setTransformXY(elem, resultXY);\n}\n\nfunction setOffset(elem, offset, option) {\n  if (option.ignoreShake) {\n    var oriOffset = getOffset(elem);\n    var oLeft = oriOffset.left.toFixed(0);\n    var oTop = oriOffset.top.toFixed(0);\n    var tLeft = offset.left.toFixed(0);\n    var tTop = offset.top.toFixed(0);\n\n    if (oLeft === tLeft && oTop === tTop) {\n      return;\n    }\n  }\n\n  if (option.useCssRight || option.useCssBottom) {\n    setLeftTop(elem, offset, option);\n  } else if (option.useCssTransform && getTransformName() in document.body.style) {\n    setTransform(elem, offset, option);\n  } else {\n    setLeftTop(elem, offset, option);\n  }\n}\n\nfunction each(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    fn(arr[i]);\n  }\n}\n\nfunction isBorderBoxFn(elem) {\n  return getComputedStyleX(elem, 'boxSizing') === 'border-box';\n}\n\nvar BOX_MODELS = ['margin', 'border', 'padding'];\nvar CONTENT_INDEX = -1;\nvar PADDING_INDEX = 2;\nvar BORDER_INDEX = 1;\nvar MARGIN_INDEX = 0;\n\nfunction swap(elem, options, callback) {\n  var old = {};\n  var style = elem.style;\n  var name = void 0; // Remember the old values, and insert the new ones\n\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      old[name] = style[name];\n      style[name] = options[name];\n    }\n  }\n\n  callback.call(elem); // Revert the old values\n\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      style[name] = old[name];\n    }\n  }\n}\n\nfunction getPBMWidth(elem, props, which) {\n  var value = 0;\n  var prop = void 0;\n  var j = void 0;\n  var i = void 0;\n\n  for (j = 0; j < props.length; j++) {\n    prop = props[j];\n\n    if (prop) {\n      for (i = 0; i < which.length; i++) {\n        var cssProp = void 0;\n\n        if (prop === 'border') {\n          cssProp = '' + prop + which[i] + 'Width';\n        } else {\n          cssProp = prop + which[i];\n        }\n\n        value += parseFloat(getComputedStyleX(elem, cssProp)) || 0;\n      }\n    }\n  }\n\n  return value;\n}\n\nvar domUtils = {};\neach(['Width', 'Height'], function (name) {\n  domUtils['doc' + name] = function (refWin) {\n    var d = refWin.document;\n    return Math.max( // firefox chrome documentElement.scrollHeight< body.scrollHeight\n    // ie standard mode : documentElement.scrollHeight> body.scrollHeight\n    d.documentElement['scroll' + name], // quirks : documentElement.scrollHeight 最大等于可视窗口多一点？\n    d.body['scroll' + name], domUtils['viewport' + name](d));\n  };\n\n  domUtils['viewport' + name] = function (win) {\n    // pc browser includes scrollbar in window.innerWidth\n    var prop = 'client' + name;\n    var doc = win.document;\n    var body = doc.body;\n    var documentElement = doc.documentElement;\n    var documentElementProp = documentElement[prop]; // 标准模式取 documentElement\n    // backcompat 取 body\n\n    return doc.compatMode === 'CSS1Compat' && documentElementProp || body && body[prop] || documentElementProp;\n  };\n});\n/*\n 得到元素的大小信息\n @param elem\n @param name\n @param {String} [extra]  'padding' : (css width) + padding\n 'border' : (css width) + padding + border\n 'margin' : (css width) + padding + border + margin\n */\n\nfunction getWH(elem, name, ex) {\n  var extra = ex;\n\n  if (isWindow(elem)) {\n    return name === 'width' ? domUtils.viewportWidth(elem) : domUtils.viewportHeight(elem);\n  } else if (elem.nodeType === 9) {\n    return name === 'width' ? domUtils.docWidth(elem) : domUtils.docHeight(elem);\n  }\n\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n  var borderBoxValue = name === 'width' ? elem.getBoundingClientRect().width : elem.getBoundingClientRect().height;\n  var computedStyle = getComputedStyleX(elem);\n  var isBorderBox = isBorderBoxFn(elem, computedStyle);\n  var cssBoxValue = 0;\n\n  if (borderBoxValue === null || borderBoxValue === undefined || borderBoxValue <= 0) {\n    borderBoxValue = undefined; // Fall back to computed then un computed css if necessary\n\n    cssBoxValue = getComputedStyleX(elem, name);\n\n    if (cssBoxValue === null || cssBoxValue === undefined || Number(cssBoxValue) < 0) {\n      cssBoxValue = elem.style[name] || 0;\n    } // Normalize '', auto, and prepare for extra\n\n\n    cssBoxValue = parseFloat(cssBoxValue) || 0;\n  }\n\n  if (extra === undefined) {\n    extra = isBorderBox ? BORDER_INDEX : CONTENT_INDEX;\n  }\n\n  var borderBoxValueOrIsBorderBox = borderBoxValue !== undefined || isBorderBox;\n  var val = borderBoxValue || cssBoxValue;\n\n  if (extra === CONTENT_INDEX) {\n    if (borderBoxValueOrIsBorderBox) {\n      return val - getPBMWidth(elem, ['border', 'padding'], which, computedStyle);\n    }\n\n    return cssBoxValue;\n  } else if (borderBoxValueOrIsBorderBox) {\n    if (extra === BORDER_INDEX) {\n      return val;\n    }\n\n    return val + (extra === PADDING_INDEX ? -getPBMWidth(elem, ['border'], which, computedStyle) : getPBMWidth(elem, ['margin'], which, computedStyle));\n  }\n\n  return cssBoxValue + getPBMWidth(elem, BOX_MODELS.slice(extra), which, computedStyle);\n}\n\nvar cssShow = {\n  position: 'absolute',\n  visibility: 'hidden',\n  display: 'block'\n}; // fix #119 : https://github.com/kissyteam/kissy/issues/119\n\nfunction getWHIgnoreDisplay() {\n  for (var _len = arguments.length, args = Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  var val = void 0;\n  var elem = args[0]; // in case elem is window\n  // elem.offsetWidth === undefined\n\n  if (elem.offsetWidth !== 0) {\n    val = getWH.apply(undefined, args);\n  } else {\n    swap(elem, cssShow, function () {\n      val = getWH.apply(undefined, args);\n    });\n  }\n\n  return val;\n}\n\neach(['width', 'height'], function (name) {\n  var first = name.charAt(0).toUpperCase() + name.slice(1);\n\n  domUtils['outer' + first] = function (el, includeMargin) {\n    return el && getWHIgnoreDisplay(el, name, includeMargin ? MARGIN_INDEX : BORDER_INDEX);\n  };\n\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  domUtils[name] = function (elem, v) {\n    var val = v;\n\n    if (val !== undefined) {\n      if (elem) {\n        var computedStyle = getComputedStyleX(elem);\n        var isBorderBox = isBorderBoxFn(elem);\n\n        if (isBorderBox) {\n          val += getPBMWidth(elem, ['padding', 'border'], which, computedStyle);\n        }\n\n        return css(elem, name, val);\n      }\n\n      return undefined;\n    }\n\n    return elem && getWHIgnoreDisplay(elem, name, CONTENT_INDEX);\n  };\n});\n\nfunction mix(to, from) {\n  for (var i in from) {\n    if (from.hasOwnProperty(i)) {\n      to[i] = from[i];\n    }\n  }\n\n  return to;\n}\n\nvar utils = {\n  getWindow: function getWindow(node) {\n    if (node && node.document && node.setTimeout) {\n      return node;\n    }\n\n    var doc = node.ownerDocument || node;\n    return doc.defaultView || doc.parentWindow;\n  },\n  getDocument: getDocument,\n  offset: function offset(el, value, option) {\n    if (typeof value !== 'undefined') {\n      setOffset(el, value, option || {});\n    } else {\n      return getOffset(el);\n    }\n  },\n  isWindow: isWindow,\n  each: each,\n  css: css,\n  clone: function clone(obj) {\n    var i = void 0;\n    var ret = {};\n\n    for (i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        ret[i] = obj[i];\n      }\n    }\n\n    var overflow = obj.overflow;\n\n    if (overflow) {\n      for (i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          ret.overflow[i] = obj.overflow[i];\n        }\n      }\n    }\n\n    return ret;\n  },\n  mix: mix,\n  getWindowScrollLeft: function getWindowScrollLeft(w) {\n    return getScrollLeft(w);\n  },\n  getWindowScrollTop: function getWindowScrollTop(w) {\n    return getScrollTop(w);\n  },\n  merge: function merge() {\n    var ret = {};\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      utils.mix(ret, args[i]);\n    }\n\n    return ret;\n  },\n  viewportWidth: 0,\n  viewportHeight: 0\n};\nmix(utils, domUtils);\nexport default utils;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/StudyMate2/node_modules/dom-align/es/utils.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","setTransitionProperty","getTransitionProperty","getTransformXY","setTransformXY","getTransformName","RE_NUM","source","getComputedStyleX","forceRelayout","elem","originalStyle","style","display","offsetHeight","css","el","name","v","value","i","hasOwnProperty","undefined","getClientPosition","box","x","y","doc","ownerDocument","body","docElem","documentElement","getBoundingClientRect","left","top","clientLeft","clientTop","getScroll","w","ret","method","d","document","getScrollLeft","getScrollTop","getOffset","pos","defaultView","parentWindow","isWindow","window","getDocument","node","nodeType","_getComputedStyle","cs","computedStyle","val","getComputedStyle","getPropertyValue","_RE_NUM_NO_PX","RegExp","RE_POS","CURRENT_STYLE","RUNTIME_STYLE","LEFT","PX","_getComputedStyleIE","test","rsLeft","pixelLeft","getOffsetDirection","dir","option","useCssRight","useCssBottom","oppositeOffsetDirection","setLeftTop","offset","position","presetH","presetV","horizontalProperty","verticalProperty","oppositeHorizontalProperty","oppositeVerticalProperty","originalTransition","originalOffset","old","key","preset","off","_key","_dir","_off","setTransform","originalXY","resultXY","setOffset","ignoreShake","oriOffset","oLeft","toFixed","oTop","tLeft","tTop","useCssTransform","each","arr","fn","length","isBorderBoxFn","BOX_MODELS","CONTENT_INDEX","PADDING_INDEX","BORDER_INDEX","MARGIN_INDEX","swap","options","callback","call","getPBMWidth","props","which","prop","j","cssProp","parseFloat","domUtils","refWin","Math","max","win","documentElementProp","compatMode","getWH","ex","extra","viewportWidth","viewportHeight","docWidth","docHeight","borderBoxValue","width","height","isBorderBox","cssBoxValue","Number","borderBoxValueOrIsBorderBox","slice","cssShow","visibility","getWHIgnoreDisplay","_len","arguments","args","Array","_key2","offsetWidth","apply","first","charAt","toUpperCase","includeMargin","mix","to","from","utils","getWindow","setTimeout","clone","overflow","getWindowScrollLeft","getWindowScrollTop","merge","_len2","_key3"],"mappings":"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","sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nimport { setTransitionProperty, getTransitionProperty, getTransformXY, setTransformXY, getTransformName } from './propertyUtils';\n\nvar RE_NUM = /[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source;\n\nvar getComputedStyleX = void 0;\n\n// https://stackoverflow.com/a/3485654/3040605\nfunction forceRelayout(elem) {\n  var originalStyle = elem.style.display;\n  elem.style.display = 'none';\n  elem.offsetHeight; // eslint-disable-line\n  elem.style.display = originalStyle;\n}\n\nfunction css(el, name, v) {\n  var value = v;\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    for (var i in name) {\n      if (name.hasOwnProperty(i)) {\n        css(el, i, name[i]);\n      }\n    }\n    return undefined;\n  }\n  if (typeof value !== 'undefined') {\n    if (typeof value === 'number') {\n      value = value + 'px';\n    }\n    el.style[name] = value;\n    return undefined;\n  }\n  return getComputedStyleX(el, name);\n}\n\nfunction getClientPosition(elem) {\n  var box = void 0;\n  var x = void 0;\n  var y = void 0;\n  var doc = elem.ownerDocument;\n  var body = doc.body;\n  var docElem = doc && doc.documentElement;\n  // 根据 GBS 最新数据，A-Grade Browsers 都已支持 getBoundingClientRect 方法，不用再考虑传统的实现方式\n  box = elem.getBoundingClientRect();\n\n  // 注：jQuery 还考虑减去 docElem.clientLeft/clientTop\n  // 但测试发现，这样反而会导致当 html 和 body 有边距/边框样式时，获取的值不正确\n  // 此外，ie6 会忽略 html 的 margin 值，幸运地是没有谁会去设置 html 的 margin\n\n  x = box.left;\n  y = box.top;\n\n  // In IE, most of the time, 2 extra pixels are added to the top and left\n  // due to the implicit 2-pixel inset border.  In IE6/7 quirks mode and\n  // IE6 standards mode, this border can be overridden by setting the\n  // document element's border to zero -- thus, we cannot rely on the\n  // offset always being 2 pixels.\n\n  // In quirks mode, the offset can be determined by querying the body's\n  // clientLeft/clientTop, but in standards mode, it is found by querying\n  // the document element's clientLeft/clientTop.  Since we already called\n  // getClientBoundingRect we have already forced a reflow, so it is not\n  // too expensive just to query them all.\n\n  // ie 下应该减去窗口的边框吧，毕竟默认 absolute 都是相对窗口定位的\n  // 窗口边框标准是设 documentElement ,quirks 时设置 body\n  // 最好禁止在 body 和 html 上边框 ，但 ie < 9 html 默认有 2px ，减去\n  // 但是非 ie 不可能设置窗口边框，body html 也不是窗口 ,ie 可以通过 html,body 设置\n  // 标准 ie 下 docElem.clientTop 就是 border-top\n  // ie7 html 即窗口边框改变不了。永远为 2\n  // 但标准 firefox/chrome/ie9 下 docElem.clientTop 是窗口边框，即使设了 border-top 也为 0\n\n  x -= docElem.clientLeft || body.clientLeft || 0;\n  y -= docElem.clientTop || body.clientTop || 0;\n\n  return {\n    left: x,\n    top: y\n  };\n}\n\nfunction getScroll(w, top) {\n  var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n  var method = 'scroll' + (top ? 'Top' : 'Left');\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    // ie6,7,8 standard mode\n    ret = d.documentElement[method];\n    if (typeof ret !== 'number') {\n      // quirks mode\n      ret = d.body[method];\n    }\n  }\n  return ret;\n}\n\nfunction getScrollLeft(w) {\n  return getScroll(w);\n}\n\nfunction getScrollTop(w) {\n  return getScroll(w, true);\n}\n\nfunction getOffset(el) {\n  var pos = getClientPosition(el);\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScrollLeft(w);\n  pos.top += getScrollTop(w);\n  return pos;\n}\n\n/**\n * A crude way of determining if an object is a window\n * @member util\n */\nfunction isWindow(obj) {\n  // must use == for ie8\n  /* eslint eqeqeq:0 */\n  return obj !== null && obj !== undefined && obj == obj.window;\n}\n\nfunction getDocument(node) {\n  if (isWindow(node)) {\n    return node.document;\n  }\n  if (node.nodeType === 9) {\n    return node;\n  }\n  return node.ownerDocument;\n}\n\nfunction _getComputedStyle(elem, name, cs) {\n  var computedStyle = cs;\n  var val = '';\n  var d = getDocument(elem);\n  computedStyle = computedStyle || d.defaultView.getComputedStyle(elem, null);\n\n  // https://github.com/kissyteam/kissy/issues/61\n  if (computedStyle) {\n    val = computedStyle.getPropertyValue(name) || computedStyle[name];\n  }\n\n  return val;\n}\n\nvar _RE_NUM_NO_PX = new RegExp('^(' + RE_NUM + ')(?!px)[a-z%]+$', 'i');\nvar RE_POS = /^(top|right|bottom|left)$/;\nvar CURRENT_STYLE = 'currentStyle';\nvar RUNTIME_STYLE = 'runtimeStyle';\nvar LEFT = 'left';\nvar PX = 'px';\n\nfunction _getComputedStyleIE(elem, name) {\n  // currentStyle maybe null\n  // http://msdn.microsoft.com/en-us/library/ms535231.aspx\n  var ret = elem[CURRENT_STYLE] && elem[CURRENT_STYLE][name];\n\n  // 当 width/height 设置为百分比时，通过 pixelLeft 方式转换的 width/height 值\n  // 一开始就处理了! CUSTOM_STYLE.height,CUSTOM_STYLE.width ,cssHook 解决@2011-08-19\n  // 在 ie 下不对，需要直接用 offset 方式\n  // borderWidth 等值也有问题，但考虑到 borderWidth 设为百分比的概率很小，这里就不考虑了\n\n  // From the awesome hack by Dean Edwards\n  // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n  // If we're not dealing with a regular pixel number\n  // but a number that has a weird ending, we need to convert it to pixels\n  // exclude left right for relativity\n  if (_RE_NUM_NO_PX.test(ret) && !RE_POS.test(name)) {\n    // Remember the original values\n    var style = elem.style;\n    var left = style[LEFT];\n    var rsLeft = elem[RUNTIME_STYLE][LEFT];\n\n    // prevent flashing of content\n    elem[RUNTIME_STYLE][LEFT] = elem[CURRENT_STYLE][LEFT];\n\n    // Put in the new values to get a computed value out\n    style[LEFT] = name === 'fontSize' ? '1em' : ret || 0;\n    ret = style.pixelLeft + PX;\n\n    // Revert the changed values\n    style[LEFT] = left;\n\n    elem[RUNTIME_STYLE][LEFT] = rsLeft;\n  }\n  return ret === '' ? 'auto' : ret;\n}\n\nif (typeof window !== 'undefined') {\n  getComputedStyleX = window.getComputedStyle ? _getComputedStyle : _getComputedStyleIE;\n}\n\nfunction getOffsetDirection(dir, option) {\n  if (dir === 'left') {\n    return option.useCssRight ? 'right' : dir;\n  }\n  return option.useCssBottom ? 'bottom' : dir;\n}\n\nfunction oppositeOffsetDirection(dir) {\n  if (dir === 'left') {\n    return 'right';\n  } else if (dir === 'right') {\n    return 'left';\n  } else if (dir === 'top') {\n    return 'bottom';\n  } else if (dir === 'bottom') {\n    return 'top';\n  }\n}\n\n// 设置 elem 相对 elem.ownerDocument 的坐标\nfunction setLeftTop(elem, offset, option) {\n  // set position first, in-case top/left are set even on static elem\n  if (css(elem, 'position') === 'static') {\n    elem.style.position = 'relative';\n  }\n  var presetH = -999;\n  var presetV = -999;\n  var horizontalProperty = getOffsetDirection('left', option);\n  var verticalProperty = getOffsetDirection('top', option);\n  var oppositeHorizontalProperty = oppositeOffsetDirection(horizontalProperty);\n  var oppositeVerticalProperty = oppositeOffsetDirection(verticalProperty);\n\n  if (horizontalProperty !== 'left') {\n    presetH = 999;\n  }\n\n  if (verticalProperty !== 'top') {\n    presetV = 999;\n  }\n  var originalTransition = '';\n  var originalOffset = getOffset(elem);\n  if ('left' in offset || 'top' in offset) {\n    originalTransition = getTransitionProperty(elem) || '';\n    setTransitionProperty(elem, 'none');\n  }\n  if ('left' in offset) {\n    elem.style[oppositeHorizontalProperty] = '';\n    elem.style[horizontalProperty] = presetH + 'px';\n  }\n  if ('top' in offset) {\n    elem.style[oppositeVerticalProperty] = '';\n    elem.style[verticalProperty] = presetV + 'px';\n  }\n  // force relayout\n  forceRelayout(elem);\n  var old = getOffset(elem);\n  var originalStyle = {};\n  for (var key in offset) {\n    if (offset.hasOwnProperty(key)) {\n      var dir = getOffsetDirection(key, option);\n      var preset = key === 'left' ? presetH : presetV;\n      var off = originalOffset[key] - old[key];\n      if (dir === key) {\n        originalStyle[dir] = preset + off;\n      } else {\n        originalStyle[dir] = preset - off;\n      }\n    }\n  }\n  css(elem, originalStyle);\n  // force relayout\n  forceRelayout(elem);\n  if ('left' in offset || 'top' in offset) {\n    setTransitionProperty(elem, originalTransition);\n  }\n  var ret = {};\n  for (var _key in offset) {\n    if (offset.hasOwnProperty(_key)) {\n      var _dir = getOffsetDirection(_key, option);\n      var _off = offset[_key] - originalOffset[_key];\n      if (_key === _dir) {\n        ret[_dir] = originalStyle[_dir] + _off;\n      } else {\n        ret[_dir] = originalStyle[_dir] - _off;\n      }\n    }\n  }\n  css(elem, ret);\n}\n\nfunction setTransform(elem, offset) {\n  var originalOffset = getOffset(elem);\n  var originalXY = getTransformXY(elem);\n  var resultXY = { x: originalXY.x, y: originalXY.y };\n  if ('left' in offset) {\n    resultXY.x = originalXY.x + offset.left - originalOffset.left;\n  }\n  if ('top' in offset) {\n    resultXY.y = originalXY.y + offset.top - originalOffset.top;\n  }\n  setTransformXY(elem, resultXY);\n}\n\nfunction setOffset(elem, offset, option) {\n  if (option.ignoreShake) {\n    var oriOffset = getOffset(elem);\n\n    var oLeft = oriOffset.left.toFixed(0);\n    var oTop = oriOffset.top.toFixed(0);\n    var tLeft = offset.left.toFixed(0);\n    var tTop = offset.top.toFixed(0);\n\n    if (oLeft === tLeft && oTop === tTop) {\n      return;\n    }\n  }\n\n  if (option.useCssRight || option.useCssBottom) {\n    setLeftTop(elem, offset, option);\n  } else if (option.useCssTransform && getTransformName() in document.body.style) {\n    setTransform(elem, offset, option);\n  } else {\n    setLeftTop(elem, offset, option);\n  }\n}\n\nfunction each(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    fn(arr[i]);\n  }\n}\n\nfunction isBorderBoxFn(elem) {\n  return getComputedStyleX(elem, 'boxSizing') === 'border-box';\n}\n\nvar BOX_MODELS = ['margin', 'border', 'padding'];\nvar CONTENT_INDEX = -1;\nvar PADDING_INDEX = 2;\nvar BORDER_INDEX = 1;\nvar MARGIN_INDEX = 0;\n\nfunction swap(elem, options, callback) {\n  var old = {};\n  var style = elem.style;\n  var name = void 0;\n\n  // Remember the old values, and insert the new ones\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      old[name] = style[name];\n      style[name] = options[name];\n    }\n  }\n\n  callback.call(elem);\n\n  // Revert the old values\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      style[name] = old[name];\n    }\n  }\n}\n\nfunction getPBMWidth(elem, props, which) {\n  var value = 0;\n  var prop = void 0;\n  var j = void 0;\n  var i = void 0;\n  for (j = 0; j < props.length; j++) {\n    prop = props[j];\n    if (prop) {\n      for (i = 0; i < which.length; i++) {\n        var cssProp = void 0;\n        if (prop === 'border') {\n          cssProp = '' + prop + which[i] + 'Width';\n        } else {\n          cssProp = prop + which[i];\n        }\n        value += parseFloat(getComputedStyleX(elem, cssProp)) || 0;\n      }\n    }\n  }\n  return value;\n}\n\nvar domUtils = {};\n\neach(['Width', 'Height'], function (name) {\n  domUtils['doc' + name] = function (refWin) {\n    var d = refWin.document;\n    return Math.max(\n    // firefox chrome documentElement.scrollHeight< body.scrollHeight\n    // ie standard mode : documentElement.scrollHeight> body.scrollHeight\n    d.documentElement['scroll' + name],\n    // quirks : documentElement.scrollHeight 最大等于可视窗口多一点？\n    d.body['scroll' + name], domUtils['viewport' + name](d));\n  };\n\n  domUtils['viewport' + name] = function (win) {\n    // pc browser includes scrollbar in window.innerWidth\n    var prop = 'client' + name;\n    var doc = win.document;\n    var body = doc.body;\n    var documentElement = doc.documentElement;\n    var documentElementProp = documentElement[prop];\n    // 标准模式取 documentElement\n    // backcompat 取 body\n    return doc.compatMode === 'CSS1Compat' && documentElementProp || body && body[prop] || documentElementProp;\n  };\n});\n\n/*\n 得到元素的大小信息\n @param elem\n @param name\n @param {String} [extra]  'padding' : (css width) + padding\n 'border' : (css width) + padding + border\n 'margin' : (css width) + padding + border + margin\n */\nfunction getWH(elem, name, ex) {\n  var extra = ex;\n  if (isWindow(elem)) {\n    return name === 'width' ? domUtils.viewportWidth(elem) : domUtils.viewportHeight(elem);\n  } else if (elem.nodeType === 9) {\n    return name === 'width' ? domUtils.docWidth(elem) : domUtils.docHeight(elem);\n  }\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n  var borderBoxValue = name === 'width' ? elem.getBoundingClientRect().width : elem.getBoundingClientRect().height;\n  var computedStyle = getComputedStyleX(elem);\n  var isBorderBox = isBorderBoxFn(elem, computedStyle);\n  var cssBoxValue = 0;\n  if (borderBoxValue === null || borderBoxValue === undefined || borderBoxValue <= 0) {\n    borderBoxValue = undefined;\n    // Fall back to computed then un computed css if necessary\n    cssBoxValue = getComputedStyleX(elem, name);\n    if (cssBoxValue === null || cssBoxValue === undefined || Number(cssBoxValue) < 0) {\n      cssBoxValue = elem.style[name] || 0;\n    }\n    // Normalize '', auto, and prepare for extra\n    cssBoxValue = parseFloat(cssBoxValue) || 0;\n  }\n  if (extra === undefined) {\n    extra = isBorderBox ? BORDER_INDEX : CONTENT_INDEX;\n  }\n  var borderBoxValueOrIsBorderBox = borderBoxValue !== undefined || isBorderBox;\n  var val = borderBoxValue || cssBoxValue;\n  if (extra === CONTENT_INDEX) {\n    if (borderBoxValueOrIsBorderBox) {\n      return val - getPBMWidth(elem, ['border', 'padding'], which, computedStyle);\n    }\n    return cssBoxValue;\n  } else if (borderBoxValueOrIsBorderBox) {\n    if (extra === BORDER_INDEX) {\n      return val;\n    }\n    return val + (extra === PADDING_INDEX ? -getPBMWidth(elem, ['border'], which, computedStyle) : getPBMWidth(elem, ['margin'], which, computedStyle));\n  }\n  return cssBoxValue + getPBMWidth(elem, BOX_MODELS.slice(extra), which, computedStyle);\n}\n\nvar cssShow = {\n  position: 'absolute',\n  visibility: 'hidden',\n  display: 'block'\n};\n\n// fix #119 : https://github.com/kissyteam/kissy/issues/119\nfunction getWHIgnoreDisplay() {\n  for (var _len = arguments.length, args = Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  var val = void 0;\n  var elem = args[0];\n  // in case elem is window\n  // elem.offsetWidth === undefined\n  if (elem.offsetWidth !== 0) {\n    val = getWH.apply(undefined, args);\n  } else {\n    swap(elem, cssShow, function () {\n      val = getWH.apply(undefined, args);\n    });\n  }\n  return val;\n}\n\neach(['width', 'height'], function (name) {\n  var first = name.charAt(0).toUpperCase() + name.slice(1);\n  domUtils['outer' + first] = function (el, includeMargin) {\n    return el && getWHIgnoreDisplay(el, name, includeMargin ? MARGIN_INDEX : BORDER_INDEX);\n  };\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  domUtils[name] = function (elem, v) {\n    var val = v;\n    if (val !== undefined) {\n      if (elem) {\n        var computedStyle = getComputedStyleX(elem);\n        var isBorderBox = isBorderBoxFn(elem);\n        if (isBorderBox) {\n          val += getPBMWidth(elem, ['padding', 'border'], which, computedStyle);\n        }\n        return css(elem, name, val);\n      }\n      return undefined;\n    }\n    return elem && getWHIgnoreDisplay(elem, name, CONTENT_INDEX);\n  };\n});\n\nfunction mix(to, from) {\n  for (var i in from) {\n    if (from.hasOwnProperty(i)) {\n      to[i] = from[i];\n    }\n  }\n  return to;\n}\n\nvar utils = {\n  getWindow: function getWindow(node) {\n    if (node && node.document && node.setTimeout) {\n      return node;\n    }\n    var doc = node.ownerDocument || node;\n    return doc.defaultView || doc.parentWindow;\n  },\n\n  getDocument: getDocument,\n  offset: function offset(el, value, option) {\n    if (typeof value !== 'undefined') {\n      setOffset(el, value, option || {});\n    } else {\n      return getOffset(el);\n    }\n  },\n\n  isWindow: isWindow,\n  each: each,\n  css: css,\n  clone: function clone(obj) {\n    var i = void 0;\n    var ret = {};\n    for (i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        ret[i] = obj[i];\n      }\n    }\n    var overflow = obj.overflow;\n    if (overflow) {\n      for (i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          ret.overflow[i] = obj.overflow[i];\n        }\n      }\n    }\n    return ret;\n  },\n\n  mix: mix,\n  getWindowScrollLeft: function getWindowScrollLeft(w) {\n    return getScrollLeft(w);\n  },\n  getWindowScrollTop: function getWindowScrollTop(w) {\n    return getScrollTop(w);\n  },\n  merge: function merge() {\n    var ret = {};\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      utils.mix(ret, args[i]);\n    }\n    return ret;\n  },\n\n  viewportWidth: 0,\n  viewportHeight: 0\n};\n\nmix(utils, domUtils);\n\nexport default utils;"]},"metadata":{},"sourceType":"module"}